<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Manager</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Nunito', sans-serif;
    }
    .tab-active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transform: scale(1.05);
    }
    .card-shadow {
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }
    .chore-done {
      opacity: 0.5;
      text-decoration: line-through;
    }
    .ingredient-bought {
      opacity: 0.5;
      text-decoration: line-through;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-in {
      animation: slideIn 0.3s ease-out forwards;
    }
    .day-chip-active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full bg-gradient-to-br from-slate-50 to-purple-50 flex flex-col overflow-hidden"><!-- Country Selection Screen -->
   <div id="country-selection" class="h-full w-full flex flex-col items-center justify-center p-6">
    <div class="bg-white rounded-3xl p-8 card-shadow max-w-md w-full animate-in">
     <div class="text-center mb-6">
      <div class="text-6xl mb-4">
       ğŸŒ
      </div>
      <h2 class="text-2xl font-extrabold text-gray-800 mb-2">Welcome to Home Manager</h2>
      <p class="text-gray-600 text-sm">Select your country to get started</p>
     </div>
     <div class="space-y-3"><button onclick="selectCountry('Kenya')" class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl py-4 px-6 font-bold text-lg transition-all transform hover:scale-105 flex items-center justify-between"> <span>ğŸ‡°ğŸ‡ª Kenya</span> <span class="text-sm font-normal opacity-90">KES</span> </button> <button onclick="selectCountry('Ivory Coast')" class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-xl py-4 px-6 font-bold text-lg transition-all transform hover:scale-105 flex items-center justify-between"> <span>ğŸ‡¨ğŸ‡® Ivory Coast</span> <span class="text-sm font-normal opacity-90">XOF</span> </button> <button onclick="selectCountry('Cameroon')" class="w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl py-4 px-6 font-bold text-lg transition-all transform hover:scale-105 flex items-center justify-between"> <span>ğŸ‡¨ğŸ‡² Cameroon</span> <span class="text-sm font-normal opacity-90">XAF</span> </button> <button onclick="selectCountry('Egypt')" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl py-4 px-6 font-bold text-lg transition-all transform hover:scale-105 flex items-center justify-between"> <span>ğŸ‡ªğŸ‡¬ Egypt</span> <span class="text-sm font-normal opacity-90">EGP</span> </button>
     </div>
    </div>
   </div><!-- Main App Content (hidden initially) -->
   <div id="main-content" class="hidden h-full w-full flex flex-col overflow-hidden"><!-- Header -->
    <header class="bg-white card-shadow px-4 py-4 flex-shrink-0">
     <div class="flex items-center justify-center">
      <h1 id="app-title" class="text-2xl font-extrabold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">Home Manager</h1>
     </div>
    </header><!-- Floating Action Buttons -->
    <div class="fixed bottom-6 right-6 flex flex-row gap-3 z-40"><button id="country-flag" onclick="showCountrySelection()" class="w-14 h-14 rounded-full bg-white card-shadow flex items-center justify-center text-2xl transition-all transform hover:scale-110"> ğŸŒ </button> <button onclick="openPersonalSettings()" class="w-14 h-14 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white card-shadow flex items-center justify-center text-2xl transition-all transform hover:scale-110"> âš™ï¸ </button> <button onclick="openTipsDrawer()" class="w-14 h-14 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white card-shadow flex items-center justify-center text-2xl transition-all transform hover:scale-110"> ğŸ’° </button>
    </div><!-- Tab Navigation -->
    <nav class="flex gap-2 px-4 py-3 flex-shrink-0"><button onclick="switchTab('chores')" id="tab-chores" class="tab-active flex-1 py-2 px-3 rounded-xl font-semibold text-sm transition-all duration-300 flex items-center justify-center gap-2"> <span>ğŸ§¹</span><span id="chores-tab-text">Chores</span> </button> <button onclick="switchTab('meals')" id="tab-meals" class="flex-1 py-2 px-3 rounded-xl font-semibold text-sm bg-white text-gray-600 transition-all duration-300 flex items-center justify-center gap-2 card-shadow"> <span>ğŸ½ï¸</span><span id="meals-tab-text">Meals</span> </button> <button onclick="switchTab('shopping')" id="tab-shopping" class="flex-1 py-2 px-3 rounded-xl font-semibold text-sm bg-white text-gray-600 transition-all duration-300 flex items-center justify-center gap-2 card-shadow"> <span>ğŸ›’</span><span id="shopping-tab-text">Shopping</span> </button>
    </nav><!-- Content Area -->
    <main class="flex-1 overflow-y-auto px-4 pb-24"><!-- Chores Tab -->
     <section id="content-chores" class="space-y-3">
      <div class="flex gap-2 overflow-x-auto pb-2 flex-wrap"><button onclick="selectChoreDay('Monday')" class="day-chip day-chip-active px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap transition-all">Mon</button> <button onclick="selectChoreDay('Tuesday')" class="day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Tue</button> <button onclick="selectChoreDay('Wednesday')" class="day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Wed</button> <button onclick="selectChoreDay('Thursday')" class="day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Thu</button> <button onclick="selectChoreDay('Friday')" class="day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Fri</button> <button onclick="selectChoreDay('Saturday')" class="day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Sat</button> <button onclick="selectChoreDay('Sunday')" class="day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Sun</button>
      </div>
      <div id="chores-list" class="space-y-2"></div>
     </section><!-- Meals Tab -->
     <section id="content-meals" class="hidden space-y-3">
      <div class="flex gap-2 mb-3"><button onclick="setMealView('daily')" id="view-daily" class="flex-1 py-2 px-3 rounded-xl font-semibold text-sm bg-gradient-to-r from-purple-500 to-indigo-500 text-white transition-all">Daily View</button> <button onclick="setMealView('monthly')" id="view-monthly" class="flex-1 py-2 px-3 rounded-xl font-semibold text-sm bg-white text-gray-600 card-shadow transition-all">Monthly View</button>
      </div><!-- Daily View -->
      <div id="daily-view" class="space-y-3">
       <div class="flex gap-2 overflow-x-auto pb-2 flex-wrap"><button onclick="selectMealDay('Monday')" class="meal-day-chip day-chip-active px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap transition-all">Mon</button> <button onclick="selectMealDay('Tuesday')" class="meal-day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Tue</button> <button onclick="selectMealDay('Wednesday')" class="meal-day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Wed</button> <button onclick="selectMealDay('Thursday')" class="meal-day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Thu</button> <button onclick="selectMealDay('Friday')" class="meal-day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Fri</button> <button onclick="selectMealDay('Saturday')" class="meal-day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Sat</button> <button onclick="selectMealDay('Sunday')" class="meal-day-chip px-3 py-1 rounded-full text-xs font-semibold bg-white text-gray-600 whitespace-nowrap transition-all">Sun</button>
       </div>
       <div id="meals-list" class="space-y-3"></div>
      </div><!-- Monthly View -->
      <div id="monthly-view" class="hidden space-y-4">
       <div id="monthly-calendar"></div>
      </div>
     </section><!-- Shopping Tab -->
     <section id="content-shopping" class="hidden space-y-3">
      <div class="bg-gradient-to-r from-purple-100 to-indigo-100 rounded-2xl p-4">
       <div class="flex justify-between items-center"><span class="font-semibold text-gray-700">Items in cart:</span> <span id="cart-count" class="font-bold text-purple-700">0 / 0</span>
       </div>
       <div class="w-full bg-white rounded-full h-2 mt-2">
        <div id="cart-progress" class="bg-gradient-to-r from-purple-500 to-indigo-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
       </div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow">
       <div class="flex justify-between items-center mb-3">
        <h3 class="font-bold text-gray-800 flex items-center gap-2"><span>ğŸŒ¾</span> Staples</h3><span id="staples-price" class="text-sm font-bold text-purple-600">KES 0</span>
       </div>
       <div id="staples-list" class="space-y-2"></div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow">
       <div class="flex justify-between items-center mb-3">
        <h3 class="font-bold text-gray-800 flex items-center gap-2"><span>ğŸ¥©</span> Proteins</h3><span id="proteins-price" class="text-sm font-bold text-purple-600">KES 0</span>
       </div>
       <div id="proteins-list" class="space-y-2"></div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow">
       <div class="flex justify-between items-center mb-3">
        <h3 class="font-bold text-gray-800 flex items-center gap-2"><span>ğŸ¥¬</span> Vegetables</h3><span id="vegetables-price" class="text-sm font-bold text-purple-600">KES 0</span>
       </div>
       <div id="vegetables-list" class="space-y-2"></div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow">
       <div class="flex justify-between items-center mb-3">
        <h3 class="font-bold text-gray-800 flex items-center gap-2"><span>ğŸŒ</span> Breakfast &amp; Snacks</h3><span id="breakfast-price" class="text-sm font-bold text-purple-600">KES 0</span>
       </div>
       <div id="breakfast-list" class="space-y-2"></div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow">
       <div class="flex justify-between items-center mb-3">
        <h3 class="font-bold text-gray-800 flex items-center gap-2"><span>ğŸ§´</span> Cooking Basics</h3><span id="basics-price" class="text-sm font-bold text-purple-600">KES 0</span>
       </div>
       <div id="basics-list" class="space-y-2"></div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow border-2 border-purple-200">
       <div class="flex justify-between items-center">
        <h3 class="font-bold text-gray-800 text-lg">Weekly Total</h3><span id="total-price" class="text-2xl font-extrabold text-purple-600">0</span>
       </div>
       <p id="budget-text" class="text-xs text-gray-500 mt-1">Budget: ~5,000</p>
      </div>
     </section>
    </main><!-- Recipe Modal -->
    <div id="recipe-modal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-end justify-center">
     <div class="bg-white w-full max-w-lg rounded-t-3xl max-h-[85%] overflow-hidden animate-in">
      <div class="sticky top-0 bg-white px-4 py-3 border-b flex justify-between items-center">
       <h3 id="modal-title" class="font-bold text-lg text-gray-800">Recipe</h3><button onclick="closeRecipeModal()" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200 transition-colors">âœ•</button>
      </div>
      <div id="modal-content" class="p-4 overflow-y-auto" style="max-height: calc(85vh - 60px);"></div>
     </div>
    </div><!-- Tips Drawer -->
    <div id="tips-drawer" class="fixed inset-0 bg-black/50 hidden z-50 flex items-end justify-center">
     <div class="bg-white w-full max-w-lg rounded-t-3xl max-h-[85%] overflow-hidden animate-in">
      <div class="sticky top-0 bg-gradient-to-r from-green-500 to-emerald-500 px-4 py-4">
       <div class="flex justify-between items-center">
        <div>
         <h3 class="font-bold text-xl text-white flex items-center gap-2"><span>ğŸ’°</span> Send Tips</h3>
         <p class="text-sm text-white/90 mt-1">Support this meal planning service!</p>
        </div><button onclick="closeTipsDrawer()" class="w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center text-white hover:bg-white/30 transition-colors text-xl">âœ•</button>
       </div>
      </div>
      <div id="tips-drawer-content" class="p-4 overflow-y-auto space-y-3" style="max-height: calc(85vh - 100px);"></div>
     </div>
    </div><!-- Password Login Modal -->
    <div id="password-modal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
     <div class="bg-white rounded-3xl p-6 max-w-md w-full animate-in card-shadow">
      <div class="text-center mb-6">
       <div class="text-5xl mb-3">
        ğŸ”’
       </div>
       <h3 class="font-bold text-xl text-gray-800 mb-2">Personal Settings</h3>
       <p class="text-sm text-gray-600">Enter your password to continue</p>
      </div>
      <form id="password-form" onsubmit="handlePasswordSubmit(event)" class="space-y-4">
       <div><label for="password-input" class="block text-sm font-semibold text-gray-700 mb-2">Password</label> <input type="password" id="password-input" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-colors" placeholder="Enter password" required>
       </div>
       <div id="password-error" class="hidden text-sm text-red-600 text-center bg-red-50 p-2 rounded-lg"></div>
       <div class="flex gap-3"><button type="button" onclick="closePasswordModal()" class="flex-1 py-3 px-4 rounded-xl font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"> Cancel </button> <button type="submit" class="flex-1 py-3 px-4 rounded-xl font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white transition-all transform hover:scale-105"> Login </button>
       </div>
      </form>
      <div id="first-time-setup" class="hidden mt-4 pt-4 border-t border-gray-200">
       <p class="text-xs text-gray-600 text-center mb-3">First time? Set up your password:</p>
       <form id="setup-form" onsubmit="handleSetupPassword(event)" class="space-y-3"><input type="password" id="setup-password" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Create password" required> <input type="password" id="setup-confirm" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Confirm password" required> <button type="submit" class="w-full py-2 px-4 rounded-xl font-semibold bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white text-sm transition-all"> Set Password </button>
       </form>
      </div>
     </div>
    </div><!-- Personal Settings Drawer -->
    <div id="settings-drawer" class="fixed inset-0 bg-black/50 hidden z-50 flex items-end justify-center">
     <div class="bg-white w-full max-w-lg rounded-t-3xl max-h-[90%] overflow-hidden animate-in">
      <div class="sticky top-0 bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-4">
       <div class="flex justify-between items-center">
        <div>
         <h3 class="font-bold text-xl text-white flex items-center gap-2"><span>âš™ï¸</span> Personal Settings</h3>
         <p class="text-sm text-white/90 mt-1">Manage your chores, meals &amp; shopping</p>
        </div><button onclick="closeSettingsDrawer()" class="w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center text-white hover:bg-white/30 transition-colors text-xl">âœ•</button>
       </div>
      </div>
      <div class="p-4 overflow-y-auto space-y-4" style="max-height: calc(90vh - 100px);"><!-- Settings Tabs -->
       <div class="flex gap-2 bg-gray-100 rounded-xl p-1"><button onclick="switchSettingsTab('chores-edit')" id="settings-tab-chores" class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm bg-white text-purple-600 shadow-sm transition-all"> ğŸ§¹ Chores </button> <button onclick="switchSettingsTab('meals-edit')" id="settings-tab-meals" class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm text-gray-600 transition-all"> ğŸ½ï¸ Meals </button> <button onclick="switchSettingsTab('shopping-edit')" id="settings-tab-shopping" class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm text-gray-600 transition-all"> ğŸ›’ Shopping </button>
       </div><!-- Chores Editor -->
       <div id="chores-editor" class="space-y-3"><button onclick="showAddChoreForm()" class="w-full py-3 px-4 rounded-xl font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white transition-all transform hover:scale-105 flex items-center justify-center gap-2"> <span>+</span> Add New Chore </button>
        <div id="custom-chores-list" class="space-y-2"></div>
       </div><!-- Meals Editor -->
       <div id="meals-editor" class="hidden space-y-3">
        <p class="text-sm text-gray-600 text-center">Meal customization coming soon!</p>
       </div><!-- Shopping Editor -->
       <div id="shopping-editor" class="hidden space-y-3"><button onclick="showAddItemForm()" class="w-full py-3 px-4 rounded-xl font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white transition-all transform hover:scale-105 flex items-center justify-center gap-2"> <span>+</span> Add New Item </button>
        <div id="custom-items-list" class="space-y-2"></div>
       </div>
      </div>
     </div>
    </div><!-- Add Chore Form Modal -->
    <div id="add-chore-modal" class="fixed inset-0 bg-black/50 hidden z-[60] flex items-center justify-center p-4">
     <div class="bg-white rounded-3xl p-6 max-w-md w-full animate-in card-shadow">
      <h3 class="font-bold text-xl text-gray-800 mb-4">Add New Chore</h3>
      <form id="add-chore-form" onsubmit="handleAddChore(event)" class="space-y-3">
       <div><label for="chore-task" class="block text-sm font-semibold text-gray-700 mb-1">Task Name</label> <input type="text" id="chore-task" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="e.g., Water the plants" required>
       </div>
       <div><label for="chore-icon" class="block text-sm font-semibold text-gray-700 mb-1">Icon (emoji)</label> <input type="text" id="chore-icon" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="ğŸŒ±" maxlength="2" required>
       </div>
       <div><label for="chore-time" class="block text-sm font-semibold text-gray-700 mb-1">Time Estimate</label> <input type="text" id="chore-time" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="15 min">
       </div>
       <div><label for="chore-day" class="block text-sm font-semibold text-gray-700 mb-1">Day</label> <select id="chore-day" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" required> <option value="Monday">Monday</option> <option value="Tuesday">Tuesday</option> <option value="Wednesday">Wednesday</option> <option value="Thursday">Thursday</option> <option value="Friday">Friday</option> <option value="Saturday">Saturday</option> <option value="Sunday">Sunday</option> </select>
       </div>
       <div class="flex gap-3 pt-2"><button type="button" onclick="closeAddChoreModal()" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm"> Cancel </button> <button type="submit" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white transition-all text-sm"> Add Chore </button>
       </div>
      </form>
     </div>
    </div><!-- Add Shopping Item Form Modal -->
    <div id="add-item-modal" class="fixed inset-0 bg-black/50 hidden z-[60] flex items-center justify-center p-4">
     <div class="bg-white rounded-3xl p-6 max-w-md w-full animate-in card-shadow">
      <h3 class="font-bold text-xl text-gray-800 mb-4">Add Shopping Item</h3>
      <form id="add-item-form" onsubmit="handleAddItem(event)" class="space-y-3">
       <div><label for="item-name" class="block text-sm font-semibold text-gray-700 mb-1">Item Name</label> <input type="text" id="item-name" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="e.g., Olive oil" required>
       </div>
       <div><label for="item-amount" class="block text-sm font-semibold text-gray-700 mb-1">Amount</label> <input type="text" id="item-amount" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="500ml" required>
       </div>
       <div><label for="item-price" id="item-price-label" class="block text-sm font-semibold text-gray-700 mb-1">Price</label> <input type="number" id="item-price" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="350" required>
       </div>
       <div><label for="item-category" class="block text-sm font-semibold text-gray-700 mb-1">Category</label> <select id="item-category" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" required> <option value="staples">Staples</option> <option value="proteins">Proteins</option> <option value="vegetables">Vegetables</option> <option value="breakfast">Breakfast &amp; Snacks</option> <option value="basics">Cooking Basics</option> </select>
       </div>
       <div class="flex gap-3 pt-2"><button type="button" onclick="closeAddItemModal()" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm"> Cancel </button> <button type="submit" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white transition-all text-sm"> Add Item </button>
       </div>
      </form>
     </div>
    </div><!-- Add Recipe Form Modal -->
    <div id="add-recipe-modal" class="fixed inset-0 bg-black/50 hidden z-[60] flex items-center justify-center p-4">
     <div class="bg-white rounded-3xl p-6 max-w-md w-full animate-in card-shadow max-h-[90vh] overflow-y-auto">
      <h3 class="font-bold text-xl text-gray-800 mb-4">Add Recipe</h3>
      <form id="add-recipe-form" onsubmit="handleAddRecipe(event)" class="space-y-3">
       <div><label for="recipe-servings" class="block text-sm font-semibold text-gray-700 mb-1">Servings</label> <input type="number" id="recipe-servings" class="w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="4" value="4" required>
       </div>
       <div>
        <div class="flex justify-between items-center mb-2">
         <label class="block text-sm font-semibold text-gray-700">Ingredients</label>
         <button type="button" onclick="addIngredientField()" class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-lg font-semibold hover:bg-purple-200 transition-colors">+ Add</button>
        </div>
        <div id="ingredients-list" class="space-y-2">
         <div class="ingredient-row flex gap-2">
          <input type="text" class="ing-name flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Name" required>
          <input type="text" class="ing-amount w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Amt" required>
          <input type="number" class="ing-price w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Price" required>
         </div>
        </div>
       </div>
       <div>
        <div class="flex justify-between items-center mb-2">
         <label class="block text-sm font-semibold text-gray-700">Steps</label>
         <button type="button" onclick="addStepField()" class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-lg font-semibold hover:bg-purple-200 transition-colors">+ Add</button>
        </div>
        <div id="steps-list" class="space-y-2">
         <div class="step-row flex gap-2 items-center">
          <span class="step-num w-6 h-6 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white flex items-center justify-center flex-shrink-0 text-xs font-bold">1</span>
          <input type="text" class="step-text flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Step description" required>
         </div>
        </div>
       </div>
       <div class="flex gap-3 pt-2"><button type="button" onclick="closeAddRecipeModal()" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm"> Cancel </button> <button type="submit" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white transition-all text-sm"> Save Recipe </button>
       </div>
      </form>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Country configuration with meals, shopping, and monthly plans
    const countryData = {
      'Kenya': {
        flag: 'ğŸ‡°ğŸ‡ª',
        currency: 'KES',
        budget: 5000,
        paymentMethods: [
          { name: 'M-Pesa', icon: 'ğŸ“±', color: 'from-green-500 to-green-600', number: '*123*456#' },
          { name: 'Airtel Money', icon: 'ğŸ’³', color: 'from-red-500 to-red-600', number: '*234*567#' }
        ],
        meals: {
          Monday: {
            breakfast: { name: 'Uji (millet porridge) + Groundnuts', icon: 'ğŸ¥£', time: '15 min', snack: 'Orange' },
            lunch: { name: 'Githeri (beans & maize) + Avocado', icon: 'ğŸ«˜', time: '45 min', snack: '' },
            dinner: {
              name: 'Grilled Tilapia + Sukuma Wiki', icon: 'ğŸŸ', time: '30 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Fresh tilapia', amount: '500g', price: 400 },
                  { name: 'Sukuma wiki', amount: '2 bunches', price: 100 },
                  { name: 'Tomatoes', amount: '300g', price: 45 },
                  { name: 'Onions', amount: '200g', price: 30 },
                  { name: 'Cooking oil', amount: '2 tbsp', price: 20 }
                ],
                steps: [
                  'Clean and season the tilapia with salt and pepper',
                  'Grill fish on both sides until cooked through',
                  'Wash and chop sukuma wiki finely',
                  'SautÃ© onions and tomatoes in oil',
                  'Add sukuma wiki and cook until tender',
                  'Serve grilled fish with sukuma wiki'
                ]
              }
            }
          },
          Tuesday: {
            breakfast: { name: '2 Boiled Eggs + Chai', icon: 'ğŸ¥š', time: '10 min', snack: 'Banana' },
            lunch: { name: 'Ugali + Beef Stew', icon: 'ğŸ²', time: '45 min', snack: '' },
            dinner: {
              name: 'Chapati + Ndengu', icon: 'ğŸ«“', time: '40 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Wheat flour', amount: '500g', price: 80 },
                  { name: 'Ndengu (green grams)', amount: '500g', price: 150 },
                  { name: 'Onions', amount: '100g', price: 15 },
                  { name: 'Tomatoes', amount: '200g', price: 30 },
                  { name: 'Cooking oil', amount: '100ml', price: 30 }
                ],
                steps: [
                  'Make chapati dough with flour, water, and salt',
                  'Let dough rest for 30 minutes',
                  'Boil ndengu until soft',
                  'Fry onions and tomatoes, add ndengu',
                  'Roll and cook chapatis on hot pan',
                  'Serve chapati with ndengu stew'
                ]
              }
            }
          },
          Wednesday: {
            breakfast: { name: 'Mandazi + Tea', icon: 'ğŸ©', time: '20 min', snack: 'Orange' },
            lunch: { name: 'Rice + Beans Stew', icon: 'ğŸš', time: '40 min', snack: '' },
            dinner: {
              name: 'Mukimo + Fried Cabbage', icon: 'ğŸ¥”', time: '50 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Potatoes', amount: '1kg', price: 100 },
                  { name: 'Maize kernels', amount: '200g', price: 40 },
                  { name: 'Beans', amount: '200g', price: 40 },
                  { name: 'Cabbage', amount: '1 head', price: 100 },
                  { name: 'Pumpkin leaves', amount: '1 bunch', price: 30 }
                ],
                steps: [
                  'Boil potatoes, maize, and beans until soft',
                  'Mash together with pumpkin leaves',
                  'Season with salt',
                  'Shred and fry cabbage with onions',
                  'Serve mukimo with fried cabbage'
                ]
              }
            }
          },
          Thursday: {
            breakfast: { name: 'Uji + Boiled Egg', icon: 'ğŸ¥£', time: '15 min', snack: 'Groundnuts' },
            lunch: { name: 'Pilau + Kachumbari', icon: 'ğŸš', time: '45 min', snack: '' },
            dinner: {
              name: 'Fried Fish + Ugali', icon: 'ğŸŸ', time: '35 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Omena', amount: '300g', price: 180 },
                  { name: 'Maize flour', amount: '500g', price: 75 },
                  { name: 'Tomatoes', amount: '200g', price: 30 },
                  { name: 'Onions', amount: '100g', price: 15 },
                  { name: 'Cooking oil', amount: '3 tbsp', price: 25 }
                ],
                steps: [
                  'Clean omena and remove any debris',
                  'Fry onions until golden, add tomatoes',
                  'Add omena and cook until crispy',
                  'Prepare ugali with maize flour and water',
                  'Serve omena with ugali'
                ]
              }
            }
          },
          Friday: {
            breakfast: { name: 'Sweet Potatoes + Tea', icon: 'ğŸ ', time: '20 min', snack: 'Banana' },
            lunch: { name: 'Matoke + Beans', icon: 'ğŸŒ', time: '50 min', snack: '' },
            dinner: {
              name: 'Chicken Stew + Rice', icon: 'ğŸ—', time: '1 hr',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Chicken (kienyeji)', amount: '500g', price: 300 },
                  { name: 'Rice', amount: '500g', price: 100 },
                  { name: 'Tomatoes', amount: '300g', price: 45 },
                  { name: 'Onions', amount: '200g', price: 30 },
                  { name: 'Garlic & ginger', amount: '50g', price: 20 }
                ],
                steps: [
                  'Cut chicken into pieces and season',
                  'Fry onions, garlic, and ginger',
                  'Add chicken and brown all sides',
                  'Add tomatoes and water, simmer until done',
                  'Cook rice separately',
                  'Serve chicken stew over rice'
                ]
              }
            }
          },
          Saturday: {
            breakfast: { name: '2 Boiled Eggs + Chapati', icon: 'ğŸ¥š', time: '15 min', snack: 'Orange' },
            lunch: { name: 'Nyama Choma + Ugali + Kachumbari', icon: 'ğŸ¥©', time: '1 hr', snack: '' },
            dinner: {
              name: 'Vegetable Stir-fry + Chapati', icon: 'ğŸ¥—', time: '25 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Cabbage', amount: '300g', price: 50 },
                  { name: 'Carrots', amount: '200g', price: 20 },
                  { name: 'Onions', amount: '150g', price: 23 },
                  { name: 'Wheat flour', amount: '300g', price: 50 },
                  { name: 'Cooking oil', amount: '100ml', price: 30 }
                ],
                steps: [
                  'Shred cabbage and slice carrots',
                  'Make chapati dough and let rest',
                  'Heat oil in a large pan',
                  'Add onions and fry until translucent',
                  'Add carrots and cabbage, stir-fry quickly',
                  'Cook chapatis and serve with vegetables'
                ]
              }
            }
          },
          Sunday: {
            breakfast: { name: 'Pancakes + Chai', icon: 'ğŸ¥', time: '20 min', snack: 'Banana' },
            lunch: { name: 'Biriani + Salad', icon: 'ğŸš', time: '1.5 hrs', snack: 'Sweet potato' },
            dinner: {
              name: 'Chicken Soup + Chapati', icon: 'ğŸ²', time: '1.5 hrs',
              recipe: {
                servings: 6,
                ingredients: [
                  { name: 'Chicken (kienyeji)', amount: '1kg', price: 600 },
                  { name: 'Potatoes', amount: '500g', price: 50 },
                  { name: 'Carrots', amount: '300g', price: 30 },
                  { name: 'Onions', amount: '200g', price: 30 },
                  { name: 'Wheat flour', amount: '300g', price: 50 }
                ],
                steps: [
                  'Cut chicken and boil until very tender',
                  'Add potatoes and carrots to soup',
                  'Season with salt and pepper',
                  'Simmer until vegetables are cooked',
                  'Prepare chapatis separately',
                  'Serve hot soup with chapati'
                ]
              }
            }
          }
        },
        monthlyMealPlan: {
          week1: {
            Monday: { breakfast: 'Smoothie mango banana', lunch: 'Braised fish & fish fillet with roasted potatoes', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Tuesday: { breakfast: 'Tea ginger lemon', lunch: 'Ugali, greens & meat', supper: '', snacks: 'Apples/pear', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ²', supperIcon: '' },
            Wednesday: { breakfast: 'Smoothie pineapple celery', lunch: 'Chinese cabbage, pak choi & pork', supper: 'Same as lunch', snacks: 'Avocado & carrot salad', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥¬', supperIcon: 'ğŸ¥¬' },
            Thursday: { breakfast: 'Smoothie ananas ginger', lunch: 'Githeri', supper: 'Same as lunch', snacks: 'Cashew nuts and tangerine', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ«˜', supperIcon: 'ğŸ«˜' },
            Friday: { breakfast: 'Mango chia pudding', lunch: 'Chicken with sautÃ©ed vegetables', supper: '', snacks: 'Apple cake', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ—', supperIcon: '' },
            Saturday: { breakfast: 'Spanish omelette', lunch: 'Rice + stew with peas and minced meat + sautÃ©ed carrot and cabbage', supper: 'Avocado', snacks: 'Samosa', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸš', supperIcon: 'ğŸ¥‘' },
            Sunday: { breakfast: 'Pancakes, avocado toast, boiled egg & tea', lunch: 'Grilled fish and plantains', supper: '', snacks: '', breakfastIcon: 'ğŸ¥', lunchIcon: 'ğŸŸ', supperIcon: '' }
          },
          week2: {
            Monday: { breakfast: '', lunch: 'Braised fish & fish fillet with roasted potatoes', supper: '', snacks: '', breakfastIcon: '', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Tuesday: { breakfast: 'Tea', lunch: 'Ugali, greens & meat', supper: '', snacks: '', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ²', supperIcon: '' },
            Wednesday: { breakfast: 'Smoothie', lunch: 'Chinese cabbage, pak choi & pork', supper: '', snacks: 'Avocado & carrot salad', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥¬', supperIcon: '' },
            Thursday: { breakfast: 'Smoothie', lunch: 'Githeri', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ«˜', supperIcon: '' },
            Friday: { breakfast: 'Mango chia pudding', lunch: 'Chicken with sautÃ©ed vegetables', supper: '', snacks: 'Apple cake', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ—', supperIcon: '' },
            Saturday: { breakfast: 'Spanish omelette', lunch: 'Avocado salad', supper: '', snacks: 'Samosa', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Sunday: { breakfast: 'Pancakes & tea', lunch: 'Puff-puff & beans', supper: '', snacks: '', breakfastIcon: 'ğŸ¥', lunchIcon: 'ğŸ©', supperIcon: '' }
          },
          week3: {
            Monday: { breakfast: 'Green smoothie', lunch: 'Broccoli pasta & fried chicken', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ', supperIcon: '' },
            Tuesday: { breakfast: '', lunch: 'Ugali, greens & meat', supper: '', snacks: '', breakfastIcon: '', lunchIcon: 'ğŸ²', supperIcon: '' },
            Wednesday: { breakfast: 'Brewed tea', lunch: 'Chapati, lentils & steamed cabbage', supper: '', snacks: '', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ«“', supperIcon: '' },
            Thursday: { breakfast: 'Smoothie', lunch: 'Pilau, banana & kachumbari', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸš', supperIcon: '' },
            Friday: { breakfast: 'Vegetable smoothie & oat-banana pancake', lunch: 'Chicken stew & rice', supper: '', snacks: 'Mandazi', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ—', supperIcon: '' },
            Saturday: { breakfast: 'Spanish omelette', lunch: 'Biriyani rice', supper: '', snacks: 'Mandazi', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸš', supperIcon: '' },
            Sunday: { breakfast: 'Banana bread & tea', lunch: 'Samosa & salad', supper: '', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ¥Ÿ', supperIcon: '' }
          },
          week4: {
            Monday: { breakfast: 'Green smoothie', lunch: 'Samosa & salad', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥Ÿ', supperIcon: '' },
            Tuesday: { breakfast: 'Tea', lunch: 'Ugali, greens & meat', supper: '', snacks: '', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ²', supperIcon: '' },
            Wednesday: { breakfast: 'Smoothie', lunch: 'Sweet potatoes & butternut squash', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ ', supperIcon: '' },
            Thursday: { breakfast: 'Smoothie', lunch: 'Pilau, banana & kachumbari', supper: '', snacks: '', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸš', supperIcon: '' },
            Friday: { breakfast: 'Avocado toast & egg', lunch: 'Plantain & chicken', supper: '', snacks: 'Carrot cake', breakfastIcon: 'ğŸ¥‘', lunchIcon: 'ğŸŒ', supperIcon: '' },
            Saturday: { breakfast: 'Spanish omelette', lunch: 'Liver salad', supper: '', snacks: 'Mandazi', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Sunday: { breakfast: 'Banana bread & tea', lunch: 'Samosa & salad', supper: 'Salad', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ¥Ÿ', supperIcon: 'ğŸ¥—' }
          }
        },
        shopping: {
          staples: [
            { id: 'ke-maize-flour', name: 'Maize flour (Ugali)', amount: '2kg', price: 300 },
            { id: 'ke-rice', name: 'Rice', amount: '2kg', price: 400 },
            { id: 'ke-dry-beans', name: 'Dry beans', amount: '2kg', price: 400 },
            { id: 'ke-ndengu', name: 'Ndengu (green grams)', amount: '1kg', price: 300 },
            { id: 'ke-potatoes', name: 'Potatoes', amount: '3kg', price: 300 },
            { id: 'ke-sweet-potatoes', name: 'Sweet potatoes', amount: '3kg', price: 300 }
          ],
          proteins: [
            { id: 'ke-eggs', name: 'Eggs', amount: '30 eggs', price: 450 },
            { id: 'ke-omena', name: 'Omena', amount: '500g', price: 300 },
            { id: 'ke-chicken', name: 'Chicken (kienyeji)', amount: '1kg', price: 600 }
          ],
          vegetables: [
            { id: 'ke-sukuma', name: 'Sukuma wiki', amount: '3 bunches', price: 150 },
            { id: 'ke-cabbage', name: 'Cabbage', amount: '1 large', price: 150 },
            { id: 'ke-tomatoes', name: 'Tomatoes', amount: '1kg', price: 150 },
            { id: 'ke-onions', name: 'Onions', amount: '1kg', price: 150 },
            { id: 'ke-carrots', name: 'Carrots', amount: '1kg', price: 100 }
          ],
          breakfast: [
            { id: 'ke-millet', name: 'Millet flour (uji)', amount: '1kg', price: 200 },
            { id: 'ke-bananas', name: 'Bananas', amount: '1 dozen', price: 150 },
            { id: 'ke-groundnuts', name: 'Groundnuts', amount: '500g', price: 200 }
          ],
          basics: [
            { id: 'ke-oil', name: 'Cooking oil', amount: '1L', price: 250 },
            { id: 'ke-spices', name: 'Salt & spices', amount: '1 pack', price: 100 }
          ]
        }
      },
      'Ivory Coast': {
        flag: 'ğŸ‡¨ğŸ‡®',
        currency: 'XOF',
        budget: 25000,
        paymentMethods: [
          { name: 'Wave', icon: 'ğŸŒŠ', color: 'from-blue-500 to-blue-600', number: '*123*1#' },
          { name: 'Orange Money', icon: 'ğŸŠ', color: 'from-orange-500 to-orange-600', number: '#144#' }
        ],
        meals: {
          Monday: {
            breakfast: { name: 'Bouillie de mil + Pain', icon: 'ğŸ¥£', time: '15 min', snack: 'Orange' },
            lunch: { name: 'Riz + Sauce Arachide', icon: 'ğŸš', time: '45 min', snack: '' },
            dinner: {
              name: 'Poisson BraisÃ© + AttiÃ©kÃ©', icon: 'ğŸŸ', time: '30 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Poisson frais', amount: '500g', price: 2000 },
                  { name: 'AttiÃ©kÃ©', amount: '500g', price: 500 },
                  { name: 'Tomates', amount: '300g', price: 300 },
                  { name: 'Oignons', amount: '200g', price: 200 },
                  { name: 'Huile', amount: '100ml', price: 300 }
                ],
                steps: [
                  'Nettoyer et assaisonner le poisson',
                  'Braiser le poisson sur le grill',
                  'PrÃ©parer la sauce tomate-oignon',
                  'RÃ©chauffer l\'attiÃ©kÃ© Ã  la vapeur',
                  'Servir le poisson avec attiÃ©kÃ© et sauce'
                ]
              }
            }
          },
          Tuesday: {
            breakfast: { name: 'Oeufs + Pain beurrÃ©', icon: 'ğŸ¥š', time: '10 min', snack: 'Banane' },
            lunch: { name: 'Foutou Banane + Sauce Graine', icon: 'ğŸŒ', time: '50 min', snack: '' },
            dinner: {
              name: 'Soupe de Poisson', icon: 'ğŸ²', time: '40 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Poisson fumÃ©', amount: '300g', price: 1500 },
                  { name: 'LÃ©gumes assortis', amount: '500g', price: 500 },
                  { name: 'Tomates', amount: '200g', price: 200 },
                  { name: 'Piment', amount: '50g', price: 100 },
                  { name: 'Sel & Ã©pices', amount: 'au goÃ»t', price: 100 }
                ],
                steps: [
                  'Faire bouillir l\'eau avec les Ã©pices',
                  'Ajouter le poisson fumÃ©',
                  'Ajouter les lÃ©gumes coupÃ©s',
                  'Laisser mijoter 30 minutes',
                  'Assaisonner et servir chaud'
                ]
              }
            }
          },
          Wednesday: {
            breakfast: { name: 'Bouillie de riz + Sucre', icon: 'ğŸ¥£', time: '15 min', snack: 'Mangue' },
            lunch: { name: 'Riz + Sauce Aubergine', icon: 'ğŸš', time: '40 min', snack: '' },
            dinner: {
              name: 'Alloco + Poisson Frit', icon: 'ğŸŒ', time: '30 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Bananes plantain', amount: '6 piÃ¨ces', price: 600 },
                  { name: 'Poisson', amount: '400g', price: 1600 },
                  { name: 'Huile de friture', amount: '500ml', price: 800 },
                  { name: 'Piment', amount: '50g', price: 100 },
                  { name: 'Sel', amount: 'au goÃ»t', price: 50 }
                ],
                steps: [
                  'Ã‰plucher et couper les plantains',
                  'Faire frire les plantains jusqu\'Ã  dorÃ©s',
                  'Assaisonner et frire le poisson',
                  'Servir alloco avec poisson et piment'
                ]
              }
            }
          },
          Thursday: {
            breakfast: { name: 'Pain + Omelette', icon: 'ğŸ³', time: '15 min', snack: 'Orange' },
            lunch: { name: 'AttiÃ©kÃ© + Poulet BraisÃ©', icon: 'ğŸ—', time: '1 hr', snack: '' },
            dinner: {
              name: 'Placali + Sauce Gombo', icon: 'ğŸ¥˜', time: '45 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Farine de manioc', amount: '500g', price: 400 },
                  { name: 'Gombo frais', amount: '300g', price: 400 },
                  { name: 'Poisson fumÃ©', amount: '200g', price: 1000 },
                  { name: 'Huile de palme', amount: '100ml', price: 300 },
                  { name: 'Sel & Ã©pices', amount: 'au goÃ»t', price: 100 }
                ],
                steps: [
                  'PrÃ©parer le placali avec farine et eau',
                  'Laver et couper le gombo',
                  'Faire revenir avec huile de palme',
                  'Ajouter le poisson fumÃ©',
                  'Servir placali avec sauce gombo'
                ]
              }
            }
          },
          Friday: {
            breakfast: { name: 'CafÃ© + Pain', icon: 'â˜•', time: '10 min', snack: 'Banane' },
            lunch: { name: 'Riz Gras + Poulet', icon: 'ğŸš', time: '1 hr', snack: '' },
            dinner: {
              name: 'Garba (AttiÃ©kÃ© + Thon)', icon: 'ğŸŸ', time: '20 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'AttiÃ©kÃ©', amount: '500g', price: 500 },
                  { name: 'Thon frit', amount: '300g', price: 1200 },
                  { name: 'Oignons', amount: '100g', price: 100 },
                  { name: 'Tomates', amount: '100g', price: 100 },
                  { name: 'Piment & cube', amount: 'au goÃ»t', price: 100 }
                ],
                steps: [
                  'Ã‰mietter l\'attiÃ©kÃ©',
                  'Faire frire le thon en morceaux',
                  'Couper oignons et tomates',
                  'MÃ©langer attiÃ©kÃ© avec condiments',
                  'Servir avec thon frit et piment'
                ]
              }
            }
          },
          Saturday: {
            breakfast: { name: 'Omelette + Pain', icon: 'ğŸ¥š', time: '15 min', snack: 'Mangue' },
            lunch: { name: 'KÃ©djÃ©nou de Poulet + Riz', icon: 'ğŸ—', time: '1.5 hrs', snack: '' },
            dinner: {
              name: 'Foutou Igname + Sauce Claire', icon: 'ğŸ¥”', time: '40 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Igname', amount: '1kg', price: 800 },
                  { name: 'Poisson', amount: '300g', price: 1200 },
                  { name: 'Aubergines', amount: '200g', price: 200 },
                  { name: 'Tomates', amount: '200g', price: 200 },
                  { name: 'Huile', amount: '50ml', price: 150 }
                ],
                steps: [
                  'Ã‰plucher et bouillir l\'igname',
                  'Piler jusqu\'Ã  obtenir le foutou',
                  'PrÃ©parer la sauce claire avec lÃ©gumes',
                  'Ajouter le poisson',
                  'Servir foutou avec sauce'
                ]
              }
            }
          },
          Sunday: {
            breakfast: { name: 'Croissant + CafÃ© au lait', icon: 'ğŸ¥', time: '10 min', snack: 'Fruits' },
            lunch: { name: 'Poulet DG', icon: 'ğŸ—', time: '1.5 hrs', snack: 'Jus naturel' },
            dinner: {
              name: 'Soupe Ivoirienne', icon: 'ğŸ²', time: '1 hr',
              recipe: {
                servings: 6,
                ingredients: [
                  { name: 'Viande de boeuf', amount: '500g', price: 2500 },
                  { name: 'LÃ©gumes variÃ©s', amount: '500g', price: 500 },
                  { name: 'Manioc', amount: '300g', price: 300 },
                  { name: 'Banane plantain', amount: '2 piÃ¨ces', price: 200 },
                  { name: 'Ã‰pices locales', amount: 'au goÃ»t', price: 200 }
                ],
                steps: [
                  'Faire bouillir la viande jusqu\'Ã  tendretÃ©',
                  'Ajouter manioc et plantain',
                  'Ajouter les lÃ©gumes',
                  'Assaisonner avec Ã©pices locales',
                  'Laisser mijoter et servir chaud'
                ]
              }
            }
          }
        },
        monthlyMealPlan: {
          week1: {
            Monday: { breakfast: 'Smoothie mangue, banane & Ã©pinards', lunch: 'Poisson braisÃ© & attiÃ©kÃ© vapeur avec salade cruditÃ©s', supper: '', snacks: 'Pommes', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Tuesday: { breakfast: 'ThÃ© gingembre-citron & Å“uf dur', lunch: 'Bouillon de lÃ©gumes avec bÅ“uf maigre', supper: '', snacks: 'Poire', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ²', supperIcon: '' },
            Wednesday: { breakfast: 'Smoothie ananas, cÃ©leri & concombre', lunch: 'Placali avec sauce gombo lÃ©gÃ¨re au poisson fumÃ©', supper: '', snacks: 'Yaourt nature Ã©crÃ©mÃ©', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥˜', supperIcon: '' },
            Thursday: { breakfast: 'Avoine cuite Ã  l\'eau & baies', lunch: 'Poulet braisÃ©, alloco au four, haricots verts', supper: '', snacks: 'Noix de cajou', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ—', supperIcon: '' },
            Friday: { breakfast: 'Avocat sur pain complet', lunch: 'Riz brun sautÃ© aux lÃ©gumes & crevettes', supper: '', snacks: 'PastÃ¨que', breakfastIcon: 'ğŸ¥‘', lunchIcon: 'ğŸš', supperIcon: '' },
            Saturday: { breakfast: 'Smoothie vert (Ã©pinards, ananas, eau coco)', lunch: 'Brochettes poulet/lÃ©gumes grillÃ©es avec couscous complet', supper: '', snacks: 'Fruits de la passion', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ—', supperIcon: '' },
            Sunday: { breakfast: 'Omelette aux lÃ©gumes', lunch: 'Kedjenou de poulet avec lÃ©gumes & attiÃ©kÃ©', supper: '', snacks: 'Orange', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ—', supperIcon: '' }
          },
          week2: {
            Monday: { breakfast: 'Flocons d\'avoine & lait d\'amande', lunch: 'Salade composÃ©e : poulet grillÃ©, avocat, champignons, lÃ©gumes verts', supper: '', snacks: 'ClÃ©mentine', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Tuesday: { breakfast: 'ThÃ© & tartine pain complet, fromage frais allÃ©gÃ©', lunch: 'Poisson vapeur (maquereau/thon), patates douces vapeur, courgettes', supper: '', snacks: 'Concombre en bÃ¢tonnets', breakfastIcon: 'â˜•', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Wednesday: { breakfast: 'Yaourt grec allÃ©gÃ© & graines de chia', lunch: 'Sauce feuille (feuilles de patate douce, Ã©pinards) avec poisson', supper: '', snacks: 'Banane', breakfastIcon: 'ğŸ¥›', lunchIcon: 'ğŸ¥¬', supperIcon: '' },
            Thursday: { breakfast: 'Smoothie mangue & Ã©pinards', lunch: 'Galette de quinoa, radis noir & carottes rÃ¢pÃ©es', supper: '', snacks: 'Amandes', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Friday: { breakfast: 'Å’ufs brouillÃ©s aux lÃ©gumes', lunch: 'Thiof (poisson) Ã  la vapeur & fonio avec lÃ©gumes variÃ©s', supper: '', snacks: 'Ananas', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Saturday: { breakfast: 'Pain complet, beurre d\'arachide & rondelles de banane', lunch: 'Sauce claire d\'aubergines au bÅ“uf maigre & riz complet', supper: '', snacks: 'Melon', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ†', supperIcon: '' },
            Sunday: { breakfast: 'CrÃªpe fine farine complÃ¨te avec compote de fruits', lunch: 'Poisson braisÃ© & igname vapeur avec sauce tomate lÃ©gÃ¨re', supper: '', snacks: 'Mangue', breakfastIcon: 'ğŸ¥', lunchIcon: 'ğŸŸ', supperIcon: '' }
          },
          week3: {
            Monday: { breakfast: 'Smoothie fruits rouges & eau', lunch: 'Salade de haricots azukis, lÃ©gumes croquants & vinaigrette lÃ©gÃ¨re', supper: '', snacks: 'Kiwi', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Tuesday: { breakfast: 'ThÃ© vert & un fruit de saison', lunch: 'Poulet sautÃ© aux lÃ©gumes asiatiques (pak choi, chou chinois) & nouilles de riz', supper: '', snacks: 'Raisin', breakfastIcon: 'ğŸµ', lunchIcon: 'ğŸ—', supperIcon: '' },
            Wednesday: { breakfast: 'Avoine & lait Ã©crÃ©mÃ©, morceaux de pÃªche', lunch: 'Gratin de riz aux courgettes & jambon de volaille', supper: '', snacks: 'Pomme', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸš', supperIcon: '' },
            Thursday: { breakfast: 'Pain complet grillÃ©, avocat, Å“uf pochÃ©', lunch: 'BÅ“uf carottes (maigre) aux Ã©pices & boulgour', supper: '', snacks: 'Fruits secs (abricots, figues)', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ¥©', supperIcon: '' },
            Friday: { breakfast: 'Smoothie ananas, menthe, concombre', lunch: 'Tofaye aux poireaux (version lÃ©gÃ¨re au tofu fumÃ©) & pommes de terre vapeur', supper: '', snacks: 'Orange', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ¥”', supperIcon: '' },
            Saturday: { breakfast: 'Yaourt nature, miel, noix', lunch: 'Saumon sur un lit de poireaux fondus', supper: '', snacks: 'Fraises', breakfastIcon: 'ğŸ¥›', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Sunday: { breakfast: 'Omelette blanche aux fines herbes', lunch: 'AttiÃ©kÃ© avec poisson frais grillÃ© & sauce pimentÃ©e aux oignons', supper: '', snacks: 'Goyave', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸŸ', supperIcon: '' }
          },
          week4: {
            Monday: { breakfast: 'Smoothie vert (Ã©pinards, concombre, citron)', lunch: 'PÃ¢tes complÃ¨tes aux lÃ©gumes grillÃ©s (aubergines, poivrons) & basilic', supper: '', snacks: 'Pamplemousse', breakfastIcon: 'ğŸ¥¤', lunchIcon: 'ğŸ', supperIcon: '' },
            Tuesday: { breakfast: 'ThÃ© & pain complet, Å“uf dur', lunch: 'RagoÃ»t de mouton (maigre) aux lÃ©gumes racines & semoule complÃ¨te', supper: '', snacks: 'Mandarine', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ–', supperIcon: '' },
            Wednesday: { breakfast: 'Flocons d\'avoine & fruits frais', lunch: 'Sauce arachide (lÃ©gÃ¨re) au poulet & riz blanc vapeur', supper: '', snacks: 'Fruits de la passion', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ—', supperIcon: '' },
            Thursday: { breakfast: 'Yaourt nature & graines de lin', lunch: 'Poisson Ã  la sauce tomate fraÃ®che (style garba amÃ©liorÃ©) & attiÃ©kÃ©', supper: '', snacks: 'Pomme', breakfastIcon: 'ğŸ¥›', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Friday: { breakfast: 'Galette de riz complet & purÃ©e d\'amande', lunch: 'Wok de lÃ©gumes variÃ©s & tofu nature', supper: '', snacks: 'Baies mÃ©langÃ©es', breakfastIcon: 'ğŸ˜', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Saturday: { breakfast: 'Omelette aux champignons', lunch: 'Reste du wok ou salade composÃ©e de la semaine', supper: '', snacks: 'Poire', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ¥—', supperIcon: '' },
            Sunday: { breakfast: 'Brunch lÃ©ger : salade de fruits, Å“uf Ã  la coque, pain complet', lunch: 'DÃ®ner libre contrÃ´lÃ© (repas plaisir)', supper: '', snacks: 'Mangue', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ½ï¸', supperIcon: '' }
          }
        },
        shopping: {
          staples: [
            { id: 'ci-rice', name: 'Riz local', amount: '5kg', price: 2500 },
            { id: 'ci-attieke', name: 'AttiÃ©kÃ©', amount: '2kg', price: 1000 },
            { id: 'ci-plantain', name: 'Bananes plantain', amount: '1 rÃ©gime', price: 1500 },
            { id: 'ci-yam', name: 'Igname', amount: '3kg', price: 1500 },
            { id: 'ci-cassava', name: 'Manioc', amount: '2kg', price: 800 }
          ],
          proteins: [
            { id: 'ci-eggs', name: 'Oeufs', amount: '30 oeufs', price: 3000 },
            { id: 'ci-chicken', name: 'Poulet', amount: '1.5kg', price: 4500 },
            { id: 'ci-fish', name: 'Poisson frais', amount: '1kg', price: 3500 },
            { id: 'ci-smoked-fish', name: 'Poisson fumÃ©', amount: '500g', price: 2500 }
          ],
          vegetables: [
            { id: 'ci-tomatoes', name: 'Tomates', amount: '2kg', price: 1000 },
            { id: 'ci-onions', name: 'Oignons', amount: '1kg', price: 500 },
            { id: 'ci-okra', name: 'Gombo', amount: '500g', price: 500 },
            { id: 'ci-eggplant', name: 'Aubergines', amount: '500g', price: 400 },
            { id: 'ci-peppers', name: 'Piments', amount: '200g', price: 300 }
          ],
          breakfast: [
            { id: 'ci-bread', name: 'Pain', amount: '7 baguettes', price: 1750 },
            { id: 'ci-milk', name: 'Lait en poudre', amount: '400g', price: 2000 },
            { id: 'ci-coffee', name: 'CafÃ©/NescafÃ©', amount: '200g', price: 1500 }
          ],
          basics: [
            { id: 'ci-palm-oil', name: 'Huile de palme', amount: '1L', price: 1500 },
            { id: 'ci-oil', name: 'Huile vÃ©gÃ©tale', amount: '1L', price: 1200 },
            { id: 'ci-spices', name: 'Ã‰pices & cubes', amount: '1 lot', price: 500 }
          ]
        }
      },
      'Cameroon': {
        flag: 'ğŸ‡¨ğŸ‡²',
        currency: 'XAF',
        budget: 25000,
        paymentMethods: [
          { name: 'Orange Money', icon: 'ğŸŠ', color: 'from-orange-500 to-orange-600', number: '#150#' },
          { name: 'MTN Mobile Money', icon: 'ğŸ“±', color: 'from-yellow-500 to-yellow-600', number: '*126#' }
        ],
        meals: {
          Monday: {
            breakfast: { name: 'Bouillie de maÃ¯s + Beignets', icon: 'ğŸ¥£', time: '20 min', snack: 'Orange' },
            lunch: { name: 'Riz + Sauce Tomate + Poisson', icon: 'ğŸš', time: '45 min', snack: '' },
            dinner: {
              name: 'NdolÃ© + Plantain', icon: 'ğŸ¥¬', time: '1 hr',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Feuilles de ndolÃ©', amount: '500g', price: 800 },
                  { name: 'Arachides moulues', amount: '200g', price: 400 },
                  { name: 'Crevettes sÃ©chÃ©es', amount: '100g', price: 600 },
                  { name: 'Plantain', amount: '4 doigts', price: 400 },
                  { name: 'Huile', amount: '100ml', price: 200 }
                ],
                steps: [
                  'Laver et faire bouillir les feuilles de ndolÃ©',
                  'Presser pour enlever l\'amertume',
                  'Faire revenir avec arachides et crevettes',
                  'Ajouter huile et assaisonner',
                  'Faire bouillir ou griller le plantain',
                  'Servir le ndolÃ© avec plantain'
                ]
              }
            }
          },
          Tuesday: {
            breakfast: { name: '2 Oeufs bouillis + Pain', icon: 'ğŸ¥š', time: '10 min', snack: 'Banane' },
            lunch: { name: 'Eru + Water Fufu', icon: 'ğŸ¥¬', time: '1.5 hrs', snack: '' },
            dinner: {
              name: 'Omelette + Pain', icon: 'ğŸ³', time: '15 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Oeufs', amount: '6 oeufs', price: 600 },
                  { name: 'Oignons', amount: '100g', price: 100 },
                  { name: 'Tomates', amount: '100g', price: 100 },
                  { name: 'Pain', amount: '2 baguettes', price: 500 },
                  { name: 'Huile', amount: '2 c.s.', price: 50 }
                ],
                steps: [
                  'Battre les oeufs avec sel',
                  'Hacher oignons et tomates',
                  'MÃ©langer aux oeufs',
                  'Faire cuire l\'omelette',
                  'Servir avec pain frais'
                ]
              }
            }
          },
          Wednesday: {
            breakfast: { name: 'Bouillie d\'avoine + Banane', icon: 'ğŸ¥£', time: '10 min', snack: 'Orange' },
            lunch: { name: 'Haricots + Plantain MÃ»r', icon: 'ğŸ«˜', time: '50 min', snack: '' },
            dinner: {
              name: 'Poisson BraisÃ© + BÃ¢ton de Manioc', icon: 'ğŸŸ', time: '40 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Poisson (bar ou maquereau)', amount: '600g', price: 1500 },
                  { name: 'BÃ¢ton de manioc', amount: '4 piÃ¨ces', price: 400 },
                  { name: 'Tomates', amount: '200g', price: 150 },
                  { name: 'Oignons', amount: '150g', price: 100 },
                  { name: 'Piment & Ã©pices', amount: 'au goÃ»t', price: 100 }
                ],
                steps: [
                  'Nettoyer et assaisonner le poisson',
                  'PrÃ©parer la sauce avec tomates et oignons',
                  'Braiser le poisson sur le grill',
                  'RÃ©chauffer le bÃ¢ton de manioc',
                  'Servir poisson avec sauce et manioc'
                ]
              }
            }
          },
          Thursday: {
            breakfast: { name: 'Bouillie + 1 Oeuf', icon: 'ğŸ¥£', time: '15 min', snack: 'Arachides' },
            lunch: { name: 'Riz + Sauce Arachide + Poulet', icon: 'ğŸš', time: '1 hr', snack: '' },
            dinner: {
              name: 'Koki + Plantain', icon: 'ğŸ«˜', time: '1.5 hrs',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Haricots blancs', amount: '500g', price: 500 },
                  { name: 'Huile de palme', amount: '200ml', price: 400 },
                  { name: 'Feuilles de bananier', amount: '6 feuilles', price: 200 },
                  { name: 'Plantain', amount: '4 doigts', price: 400 },
                  { name: 'Sel & Ã©pices', amount: 'au goÃ»t', price: 100 }
                ],
                steps: [
                  'Tremper et moudre les haricots',
                  'MÃ©langer avec huile de palme et sel',
                  'Envelopper dans feuilles de bananier',
                  'Cuire Ã  la vapeur 2 heures',
                  'Servir avec plantain grillÃ©'
                ]
              }
            }
          },
          Friday: {
            breakfast: { name: 'Beignets + Bouillie', icon: 'ğŸ©', time: '20 min', snack: 'Banane' },
            lunch: { name: 'Fufu de MaÃ¯s + Sauce Jaune', icon: 'ğŸ²', time: '1 hr', snack: '' },
            dinner: {
              name: 'Sanga + LÃ©gumes', icon: 'ğŸŒ½', time: '45 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'MaÃ¯s frais', amount: '500g', price: 400 },
                  { name: 'Haricots', amount: '200g', price: 200 },
                  { name: 'Feuilles de manioc', amount: '300g', price: 200 },
                  { name: 'Huile de palme', amount: '100ml', price: 200 },
                  { name: 'Sel', amount: 'au goÃ»t', price: 50 }
                ],
                steps: [
                  'Faire bouillir maÃ¯s et haricots ensemble',
                  'Ã‰craser lÃ©gÃ¨rement',
                  'PrÃ©parer les feuilles de manioc',
                  'Servir sanga avec lÃ©gumes sautÃ©s'
                ]
              }
            }
          },
          Saturday: {
            breakfast: { name: '2 Oeufs + Beignets', icon: 'ğŸ¥š', time: '15 min', snack: 'Orange' },
            lunch: { name: 'Poulet DG', icon: 'ğŸ—', time: '1.5 hrs', snack: '' },
            dinner: {
              name: 'Mbongo Tchobi + Riz', icon: 'ğŸ²', time: '1.5 hrs',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Poisson ou viande', amount: '500g', price: 1500 },
                  { name: 'Ã‰pices mbongo', amount: '100g', price: 500 },
                  { name: 'Riz', amount: '500g', price: 400 },
                  { name: 'Oignons', amount: '150g', price: 100 },
                  { name: 'Huile', amount: '100ml', price: 200 }
                ],
                steps: [
                  'Griller les Ã©pices mbongo',
                  'Moudre finement',
                  'Assaisonner la viande/poisson',
                  'Cuire dans sauce noire Ã©picÃ©e',
                  'Servir avec riz blanc'
                ]
              }
            }
          },
          Sunday: {
            breakfast: { name: 'Croissants + CafÃ© au lait', icon: 'ğŸ¥', time: '10 min', snack: 'Fruits' },
            lunch: { name: 'KondrÃ© + Plantain', icon: 'ğŸŒ', time: '2 hrs', snack: 'Jus naturel' },
            dinner: {
              name: 'Soupe PÃ©pÃ©', icon: 'ğŸ²', time: '1 hr',
              recipe: {
                servings: 6,
                ingredients: [
                  { name: 'Viande de boeuf', amount: '500g', price: 2000 },
                  { name: 'LÃ©gumes variÃ©s', amount: '500g', price: 400 },
                  { name: 'Plantain vert', amount: '2 doigts', price: 200 },
                  { name: 'Macabo', amount: '300g', price: 300 },
                  { name: 'Ã‰pices', amount: 'au goÃ»t', price: 200 }
                ],
                steps: [
                  'Faire bouillir la viande',
                  'Ajouter plantain et macabo',
                  'Ajouter les lÃ©gumes',
                  'Assaisonner et laisser mijoter',
                  'Servir bien chaud'
                ]
              }
            }
          }
        },
        monthlyMealPlan: {
          week1: {
            Monday: { breakfast: 'Pap + akara', lunch: 'NdolÃ© + boiled plantain', supper: 'Light vegetable soup + fish', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ¥¬', supperIcon: 'ğŸ²' },
            Tuesday: { breakfast: 'Bread + omelette + tea', lunch: 'Pomme/plantain pilÃ© haricot', supper: 'Light vegetable soup', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸŒ', supperIcon: 'ğŸ²' },
            Wednesday: { breakfast: 'Bread and butter', lunch: 'Eru + garri', supper: 'Tapioca arachide', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ¥¬', supperIcon: 'ğŸ¥œ' },
            Thursday: { breakfast: 'Oats with milk', lunch: 'Egusi soup + fufu corn', supper: 'Leftover egusi (small fufu)', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ²', supperIcon: 'ğŸ²' },
            Friday: { breakfast: 'Fried yam + eggs', lunch: 'Fried rice + chicken', supper: 'Grilled fish + vegetables', snacks: '', breakfastIcon: 'ğŸ ', lunchIcon: 'ğŸš', supperIcon: 'ğŸŸ' },
            Saturday: { breakfast: 'Bouillie', lunch: 'Achu', supper: 'Indomie + boiled egg + vegetables', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ²', supperIcon: 'ğŸœ' },
            Sunday: { breakfast: 'Bread + tea', lunch: 'Broccoli pasta', supper: 'Light soup (large portions)', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ', supperIcon: 'ğŸ²' }
          },
          week2: {
            Monday: { breakfast: 'Spaghetti omelette', lunch: 'Braised porc and miondo', supper: 'Salad or Sunday\'s soup', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ¥©', supperIcon: 'ğŸ¥—' },
            Tuesday: { breakfast: 'Bread + peanut butter', lunch: 'Rice and groundnut stew', supper: 'Bobolo and groundnut stew', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸš', supperIcon: 'ğŸ¥œ' },
            Wednesday: { breakfast: 'Bobolo + avocado', lunch: 'Rice and groundnut stew', supper: 'Avocado carrot salad', snacks: '', breakfastIcon: 'ğŸ¥–', lunchIcon: 'ğŸš', supperIcon: 'ğŸ¥—' },
            Thursday: { breakfast: 'Oats', lunch: 'SautÃ©ed Irish potatoes with meat', supper: 'Same as lunch', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ¥”', supperIcon: 'ğŸ¥”' },
            Friday: { breakfast: 'Fried plantain + eggs', lunch: 'Beans & ripe plantain', supper: 'Vegetable omelette', snacks: '', breakfastIcon: 'ğŸŒ', lunchIcon: 'ğŸ«˜', supperIcon: 'ğŸ³' },
            Saturday: { breakfast: 'BHB', lunch: 'Met de pistache', supper: 'Leftovers', snacks: '', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ²', supperIcon: 'ğŸ½ï¸' },
            Sunday: { breakfast: 'Bread + tea', lunch: 'Leftovers or lasagne', supper: 'Grilled fish du quartier', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ', supperIcon: 'ğŸŸ' }
          },
          week3: {
            Monday: { breakfast: 'Rice omelette', lunch: 'Koki beans + plantain', supper: 'Vegetable soup', snacks: '', breakfastIcon: 'ğŸš', lunchIcon: 'ğŸ«˜', supperIcon: 'ğŸ²' },
            Tuesday: { breakfast: 'Bread + omelette', lunch: 'Maquereau Ã  la poÃªle + bobolo', supper: 'Leftover ekwang', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸŸ', supperIcon: 'ğŸ²' },
            Wednesday: { breakfast: 'Sweet potatoes + groundnuts', lunch: 'SautÃ©ed garlic shrimps', supper: 'Same as lunch', snacks: '', breakfastIcon: 'ğŸ ', lunchIcon: 'ğŸ¦', supperIcon: 'ğŸ¦' },
            Thursday: { breakfast: 'Oats', lunch: 'Bitterleaf soup + fufu', supper: 'Leftover bitterleaf', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ¥¬', supperIcon: 'ğŸ¥¬' },
            Friday: { breakfast: 'Pancakes', lunch: 'Grilled chicken + vegetables', supper: 'Same as lunch', snacks: '', breakfastIcon: 'ğŸ¥', lunchIcon: 'ğŸ—', supperIcon: 'ğŸ—' },
            Saturday: { breakfast: 'Pancakes', lunch: 'Koki plantain', supper: 'Same as lunch', snacks: '', breakfastIcon: 'ğŸ¥', lunchIcon: 'ğŸ«˜', supperIcon: 'ğŸ«˜' },
            Sunday: { breakfast: 'Bread + avocado', lunch: 'Ekwang', supper: 'SautÃ©ed vegetables (big portions)', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ²', supperIcon: 'ğŸ¥—' }
          },
          week4: {
            Monday: { breakfast: 'Pap', lunch: 'NdolÃ© + plantain', supper: 'Same as lunch', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ¥¬', supperIcon: 'ğŸ¥¬' },
            Tuesday: { breakfast: 'Bread + omelette', lunch: 'Okra soup + fufu', supper: 'Leftover okra', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸ¥˜', supperIcon: 'ğŸ¥˜' },
            Wednesday: { breakfast: 'Tea', lunch: 'Eru + garri', supper: 'Pepper soup', snacks: '', breakfastIcon: 'â˜•', lunchIcon: 'ğŸ¥¬', supperIcon: 'ğŸ²' },
            Thursday: { breakfast: 'Oats', lunch: 'Beans', supper: 'Cucumber salad', snacks: '', breakfastIcon: 'ğŸ¥£', lunchIcon: 'ğŸ«˜', supperIcon: 'ğŸ¥—' },
            Friday: { breakfast: 'Bread and beans', lunch: 'Fried rice with grilled fish', supper: 'Grilled fish with sautÃ©ed vegetables', snacks: '', breakfastIcon: 'ğŸ', lunchIcon: 'ğŸš', supperIcon: 'ğŸŸ' },
            Saturday: { breakfast: 'Sardines omelette', lunch: 'Grilled chicken with sautÃ©ed vegetables', supper: 'Pepper soup', snacks: '', breakfastIcon: 'ğŸŸ', lunchIcon: 'ğŸ—', supperIcon: 'ğŸ²' },
            Sunday: { breakfast: 'BHB', lunch: 'Sanga', supper: 'Leftovers', snacks: '', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸŒ½', supperIcon: 'ğŸ½ï¸' }
          }
        },
        shopping: {
          staples: [
            { id: 'cm-rice', name: 'Riz local', amount: '5kg', price: 2500 },
            { id: 'cm-corn-flour', name: 'Farine de maÃ¯s', amount: '2kg', price: 800 },
            { id: 'cm-plantain', name: 'Plantain', amount: '1 rÃ©gime', price: 1500 },
            { id: 'cm-cassava', name: 'BÃ¢ton de manioc', amount: '10 piÃ¨ces', price: 1000 },
            { id: 'cm-beans', name: 'Haricots', amount: '2kg', price: 1200 }
          ],
          proteins: [
            { id: 'cm-eggs', name: 'Oeufs', amount: '30 oeufs', price: 3000 },
            { id: 'cm-chicken', name: 'Poulet', amount: '1.5kg', price: 4000 },
            { id: 'cm-fish', name: 'Poisson (bar)', amount: '1kg', price: 3000 },
            { id: 'cm-beef', name: 'Viande de boeuf', amount: '500g', price: 2000 }
          ],
          vegetables: [
            { id: 'cm-ndole', name: 'Feuilles de ndolÃ©', amount: '1kg', price: 1500 },
            { id: 'cm-tomatoes', name: 'Tomates', amount: '2kg', price: 800 },
            { id: 'cm-onions', name: 'Oignons', amount: '1kg', price: 500 },
            { id: 'cm-peppers', name: 'Piments', amount: '200g', price: 200 },
            { id: 'cm-cassava-leaves', name: 'Feuilles de manioc', amount: '500g', price: 400 }
          ],
          breakfast: [
            { id: 'cm-bread', name: 'Pain', amount: '7 baguettes', price: 1750 },
            { id: 'cm-milk', name: 'Lait en poudre', amount: '400g', price: 2000 },
            { id: 'cm-coffee', name: 'CafÃ©', amount: '200g', price: 1500 }
          ],
          basics: [
            { id: 'cm-palm-oil', name: 'Huile de palme', amount: '1L', price: 1200 },
            { id: 'cm-groundnuts', name: 'Arachides moulues', amount: '500g', price: 800 },
            { id: 'cm-spices', name: 'Ã‰pices & cube', amount: '1 lot', price: 500 }
          ]
        }
      },
      'Egypt': {
        flag: 'ğŸ‡ªğŸ‡¬',
        currency: 'EGP',
        budget: 1500,
        paymentMethods: [
          { name: 'Vodafone Cash', icon: 'ğŸ’³', color: 'from-red-500 to-red-600', number: '*9#' },
          { name: 'Orange Cash', icon: 'ğŸŠ', color: 'from-orange-500 to-orange-600', number: '#4444#' }
        ],
        meals: {
          Monday: {
            breakfast: { name: 'Foul Medames + Bread', icon: 'ğŸ«˜', time: '15 min', snack: 'Orange' },
            lunch: { name: 'Koshari', icon: 'ğŸš', time: '45 min', snack: '' },
            dinner: {
              name: 'Grilled Fish + Rice', icon: 'ğŸŸ', time: '30 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Tilapia fish', amount: '500g', price: 80 },
                  { name: 'Rice', amount: '400g', price: 20 },
                  { name: 'Tomatoes', amount: '200g', price: 10 },
                  { name: 'Onions', amount: '150g', price: 8 },
                  { name: 'Lemon & spices', amount: 'to taste', price: 10 }
                ],
                steps: [
                  'Clean and season fish with lemon and cumin',
                  'Grill fish until golden on both sides',
                  'Cook rice with tomato sauce',
                  'Prepare onion garnish',
                  'Serve fish with rice and salad'
                ]
              }
            }
          },
          Tuesday: {
            breakfast: { name: 'Eggs + Feta Cheese + Bread', icon: 'ğŸ¥š', time: '10 min', snack: 'Dates' },
            lunch: { name: 'Molokhia + Rice + Chicken', icon: 'ğŸ¥¬', time: '1 hr', snack: '' },
            dinner: {
              name: 'Falafel Sandwich', icon: 'ğŸ§†', time: '20 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Falafel (ready)', amount: '12 pieces', price: 20 },
                  { name: 'Baladi bread', amount: '4 loaves', price: 4 },
                  { name: 'Tahini', amount: '100g', price: 15 },
                  { name: 'Tomatoes & pickles', amount: '200g', price: 10 },
                  { name: 'Parsley', amount: '1 bunch', price: 5 }
                ],
                steps: [
                  'Warm the falafel',
                  'Prepare tahini sauce',
                  'Slice tomatoes and pickles',
                  'Assemble sandwiches in bread',
                  'Add tahini and vegetables'
                ]
              }
            }
          },
          Wednesday: {
            breakfast: { name: 'Foul + Taameya', icon: 'ğŸ«˜', time: '15 min', snack: 'Banana' },
            lunch: { name: 'Mahshi (Stuffed Vegetables)', icon: 'ğŸ«‘', time: '1.5 hrs', snack: '' },
            dinner: {
              name: 'Lentil Soup + Bread', icon: 'ğŸ²', time: '40 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Red lentils', amount: '300g', price: 15 },
                  { name: 'Onions', amount: '150g', price: 8 },
                  { name: 'Tomatoes', amount: '100g', price: 5 },
                  { name: 'Cumin & lemon', amount: 'to taste', price: 5 },
                  { name: 'Bread', amount: '4 loaves', price: 4 }
                ],
                steps: [
                  'Wash lentils and boil until soft',
                  'Fry onions until golden',
                  'Blend soup until smooth',
                  'Season with cumin and lemon',
                  'Serve hot with bread'
                ]
              }
            }
          },
          Thursday: {
            breakfast: { name: 'Eggs + Cheese + Bread', icon: 'ğŸ¥š', time: '10 min', snack: 'Orange' },
            lunch: { name: 'Kofta + Rice + Salad', icon: 'ğŸ–', time: '45 min', snack: '' },
            dinner: {
              name: 'Foul + Taameya', icon: 'ğŸ«˜', time: '15 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Foul medames', amount: '400g', price: 15 },
                  { name: 'Taameya (falafel)', amount: '8 pieces', price: 15 },
                  { name: 'Bread', amount: '4 loaves', price: 4 },
                  { name: 'Olive oil', amount: '50ml', price: 10 },
                  { name: 'Lemon & cumin', amount: 'to taste', price: 5 }
                ],
                steps: [
                  'Heat foul and season with cumin',
                  'Fry taameya until crispy',
                  'Drizzle foul with olive oil',
                  'Serve with warm bread'
                ]
              }
            }
          },
          Friday: {
            breakfast: { name: 'Feteer Meshaltet', icon: 'ğŸ¥§', time: '30 min', snack: 'Dates' },
            lunch: { name: 'Fattah', icon: 'ğŸ–', time: '1.5 hrs', snack: '' },
            dinner: {
              name: 'Grilled Chicken + Salad', icon: 'ğŸ—', time: '45 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Chicken', amount: '1kg', price: 90 },
                  { name: 'Onions', amount: '200g', price: 10 },
                  { name: 'Tomatoes', amount: '200g', price: 10 },
                  { name: 'Cucumber', amount: '200g', price: 8 },
                  { name: 'Spices', amount: 'to taste', price: 10 }
                ],
                steps: [
                  'Marinate chicken with spices',
                  'Grill until golden and cooked',
                  'Prepare fresh salad',
                  'Serve with Egyptian bread'
                ]
              }
            }
          },
          Saturday: {
            breakfast: { name: 'Shakshuka', icon: 'ğŸ³', time: '20 min', snack: 'Fruit' },
            lunch: { name: 'Sayadeya (Fish & Rice)', icon: 'ğŸŸ', time: '1 hr', snack: '' },
            dinner: {
              name: 'Koshari', icon: 'ğŸš', time: '30 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Rice', amount: '200g', price: 10 },
                  { name: 'Macaroni', amount: '200g', price: 10 },
                  { name: 'Lentils', amount: '150g', price: 8 },
                  { name: 'Chickpeas', amount: '150g', price: 10 },
                  { name: 'Tomato sauce & onions', amount: '300g', price: 15 }
                ],
                steps: [
                  'Cook rice, macaroni, lentils separately',
                  'Prepare spicy tomato sauce',
                  'Fry onions until crispy',
                  'Layer ingredients in bowl',
                  'Top with sauce and fried onions'
                ]
              }
            }
          },
          Sunday: {
            breakfast: { name: 'Foul + Fresh Juice', icon: 'ğŸ«˜', time: '15 min', snack: 'Mango' },
            lunch: { name: 'Roast Chicken + Rice + Molokhia', icon: 'ğŸ—', time: '1.5 hrs', snack: '' },
            dinner: {
              name: 'Fiteer Baladi + Honey', icon: 'ğŸ¥§', time: '25 min',
              recipe: {
                servings: 4,
                ingredients: [
                  { name: 'Flour', amount: '500g', price: 10 },
                  { name: 'Butter/Ghee', amount: '100g', price: 25 },
                  { name: 'Honey', amount: '100g', price: 30 },
                  { name: 'Sugar', amount: '50g', price: 5 },
                  { name: 'Cheese (optional)', amount: '100g', price: 20 }
                ],
                steps: [
                  'Make dough and let rest',
                  'Stretch dough very thin',
                  'Layer with butter/ghee',
                  'Bake until golden and crispy',
                  'Serve with honey or cheese'
                ]
              }
            }
          }
        },
        monthlyMealPlan: {
          week1: {
            Monday: { breakfast: 'Foul medames', lunch: 'Koshari', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸš', supperIcon: '' },
            Tuesday: { breakfast: 'Eggs & cheese', lunch: 'Molokhia with rice', supper: '', snacks: 'Dates', breakfastIcon: 'ğŸ¥š', lunchIcon: 'ğŸ¥¬', supperIcon: '' },
            Wednesday: { breakfast: 'Foul & taameya', lunch: 'Mahshi', supper: 'Lentil soup', snacks: 'Fruit', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ«‘', supperIcon: 'ğŸ²' },
            Thursday: { breakfast: 'Eggs & bread', lunch: 'Kofta & rice', supper: 'Foul', snacks: 'Orange', breakfastIcon: 'ğŸ¥š', lunchIcon: 'ğŸ–', supperIcon: 'ğŸ«˜' },
            Friday: { breakfast: 'Feteer', lunch: 'Fattah', supper: '', snacks: 'Dates', breakfastIcon: 'ğŸ¥§', lunchIcon: 'ğŸ–', supperIcon: '' },
            Saturday: { breakfast: 'Shakshuka', lunch: 'Sayadeya', supper: 'Koshari', snacks: 'Juice', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸŸ', supperIcon: 'ğŸš' },
            Sunday: { breakfast: 'Foul & juice', lunch: 'Roast chicken', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ—', supperIcon: '' }
          },
          week2: {
            Monday: { breakfast: 'Foul', lunch: 'Grilled fish & rice', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Tuesday: { breakfast: 'Eggs & feta', lunch: 'Koshari', supper: '', snacks: '', breakfastIcon: 'ğŸ¥š', lunchIcon: 'ğŸš', supperIcon: '' },
            Wednesday: { breakfast: 'Taameya', lunch: 'Molokhia', supper: '', snacks: 'Fruit', breakfastIcon: 'ğŸ§†', lunchIcon: 'ğŸ¥¬', supperIcon: '' },
            Thursday: { breakfast: 'Foul', lunch: 'Mahshi', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ«‘', supperIcon: '' },
            Friday: { breakfast: 'Feteer', lunch: 'Fattah', supper: '', snacks: 'Dates', breakfastIcon: 'ğŸ¥§', lunchIcon: 'ğŸ–', supperIcon: '' },
            Saturday: { breakfast: 'Shakshuka', lunch: 'Kofta & salad', supper: '', snacks: 'Juice', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ–', supperIcon: '' },
            Sunday: { breakfast: 'Foul', lunch: 'Chicken & rice', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ—', supperIcon: '' }
          },
          week3: {
            Monday: { breakfast: 'Foul & bread', lunch: 'Koshari', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸš', supperIcon: '' },
            Tuesday: { breakfast: 'Eggs', lunch: 'Lentil soup', supper: '', snacks: '', breakfastIcon: 'ğŸ¥š', lunchIcon: 'ğŸ²', supperIcon: '' },
            Wednesday: { breakfast: 'Taameya', lunch: 'Molokhia & chicken', supper: '', snacks: '', breakfastIcon: 'ğŸ§†', lunchIcon: 'ğŸ¥¬', supperIcon: '' },
            Thursday: { breakfast: 'Foul', lunch: 'Sayadeya', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Friday: { breakfast: 'Feteer', lunch: 'Fattah', supper: '', snacks: 'Dates', breakfastIcon: 'ğŸ¥§', lunchIcon: 'ğŸ–', supperIcon: '' },
            Saturday: { breakfast: 'Shakshuka', lunch: 'Grilled chicken', supper: '', snacks: 'Juice', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ—', supperIcon: '' },
            Sunday: { breakfast: 'Foul & juice', lunch: 'Kofta & rice', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ–', supperIcon: '' }
          },
          week4: {
            Monday: { breakfast: 'Foul', lunch: 'Mahshi', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ«‘', supperIcon: '' },
            Tuesday: { breakfast: 'Eggs & cheese', lunch: 'Koshari', supper: '', snacks: '', breakfastIcon: 'ğŸ¥š', lunchIcon: 'ğŸš', supperIcon: '' },
            Wednesday: { breakfast: 'Taameya', lunch: 'Molokhia', supper: '', snacks: '', breakfastIcon: 'ğŸ§†', lunchIcon: 'ğŸ¥¬', supperIcon: '' },
            Thursday: { breakfast: 'Foul', lunch: 'Fish & rice', supper: '', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸŸ', supperIcon: '' },
            Friday: { breakfast: 'Feteer', lunch: 'Fattah', supper: '', snacks: 'Dates', breakfastIcon: 'ğŸ¥§', lunchIcon: 'ğŸ–', supperIcon: '' },
            Saturday: { breakfast: 'Shakshuka', lunch: 'Kofta', supper: '', snacks: 'Juice', breakfastIcon: 'ğŸ³', lunchIcon: 'ğŸ–', supperIcon: '' },
            Sunday: { breakfast: 'Foul', lunch: 'Roast chicken', supper: 'Salad', snacks: '', breakfastIcon: 'ğŸ«˜', lunchIcon: 'ğŸ—', supperIcon: 'ğŸ¥—' }
          }
        },
        shopping: {
          staples: [
            { id: 'eg-rice', name: 'Rice (Egyptian)', amount: '2kg', price: 40 },
            { id: 'eg-bread', name: 'Baladi bread', amount: '20 loaves', price: 20 },
            { id: 'eg-pasta', name: 'Macaroni', amount: '1kg', price: 25 },
            { id: 'eg-lentils', name: 'Red lentils', amount: '1kg', price: 30 },
            { id: 'eg-foul', name: 'Foul medames', amount: '1kg', price: 25 }
          ],
          proteins: [
            { id: 'eg-eggs', name: 'Eggs', amount: '30 eggs', price: 90 },
            { id: 'eg-chicken', name: 'Chicken', amount: '1.5kg', price: 135 },
            { id: 'eg-fish', name: 'Tilapia', amount: '1kg', price: 80 },
            { id: 'eg-beef', name: 'Beef (kofta)', amount: '500g', price: 100 }
          ],
          vegetables: [
            { id: 'eg-tomatoes', name: 'Tomatoes', amount: '2kg', price: 20 },
            { id: 'eg-onions', name: 'Onions', amount: '1kg', price: 15 },
            { id: 'eg-molokhia', name: 'Molokhia (frozen)', amount: '500g', price: 25 },
            { id: 'eg-cucumber', name: 'Cucumber', amount: '1kg', price: 15 },
            { id: 'eg-peppers', name: 'Green peppers', amount: '500g', price: 15 }
          ],
          breakfast: [
            { id: 'eg-cheese', name: 'Feta cheese', amount: '500g', price: 50 },
            { id: 'eg-tahini', name: 'Tahini', amount: '300g', price: 30 },
            { id: 'eg-honey', name: 'Honey', amount: '250g', price: 40 }
          ],
          basics: [
            { id: 'eg-oil', name: 'Cooking oil', amount: '1L', price: 45 },
            { id: 'eg-ghee', name: 'Ghee (samna)', amount: '250g', price: 40 },
            { id: 'eg-spices', name: 'Cumin & spices', amount: '1 pack', price: 20 }
          ]
        }
      }
    };

    let selectedCountry = null;
    let isAuthenticated = false;
    let currentSettingsTab = 'chores-edit';

    // Daily chores (every day)
    const dailyChores = [
      { id: 'daily1', task: '7:30 AM â€“ Prepare Breakfast', icon: 'ğŸ³', time: '30 min' },
      { id: 'daily2', task: 'After breakfast â€“ Clear table, wash dishes, wipe surfaces', icon: 'ğŸ§½', time: '15 min' },
      { id: 'daily3', task: 'Make the beds', icon: 'ğŸ›ï¸', time: '10 min' },
      { id: 'daily4', task: 'After cooking â€“ Pick the kids', icon: 'ğŸš—', time: '30 min' },
      { id: 'daily5', task: 'Before leaving â€“ Clean counters, wash dishes, empty trash', icon: 'ğŸ—‘ï¸', time: '15 min' }
    ];

    // Default chores data
    const defaultChoresData = {
      Monday: [
        { id: 'default-mon1', task: 'Sweep and floors', icon: 'ğŸ§¹', time: '20 min' },
        { id: 'default-mon2', task: 'Cook meals', icon: 'ğŸ²', time: '1 hr' }
      ],
      Tuesday: [
        { id: 'default-tue1', task: 'Change bedsheets', icon: 'ğŸ›ï¸', time: '20 min' },
        { id: 'default-tue2', task: 'Sweep floors', icon: 'ğŸ§¹', time: '15 min' },
        { id: 'default-tue3', task: 'Cook meals', icon: 'ğŸ²', time: '1 hr' },
        { id: 'default-tue4', task: 'Laundry', icon: 'ğŸ‘•', time: '45 min' },
        { id: 'default-tue5', task: 'Wash bathrooms', icon: 'ğŸš¿', time: '30 min' }
      ],
      Wednesday: [
        { id: 'default-wed1', task: 'Sweep and mop floors', icon: 'ğŸ§¹', time: '30 min' },
        { id: 'default-wed2', task: 'Cook meals', icon: 'ğŸ²', time: '1 hr' },
        { id: 'default-wed3', task: 'Iron clothes', icon: 'ğŸ‘”', time: '30 min' }
      ],
      Thursday: [
        { id: 'default-thu1', task: 'Clean windows and dust drawers', icon: 'ğŸªŸ', time: '40 min' },
        { id: 'default-thu2', task: 'Sweep and mop floors', icon: 'ğŸ§¹', time: '30 min' },
        { id: 'default-thu3', task: 'Cook meals', icon: 'ğŸ²', time: '1 hr' },
        { id: 'default-thu4', task: 'Laundry', icon: 'ğŸ‘•', time: '45 min' }
      ],
      Friday: [
        { id: 'default-fri1', task: 'Sweep and mop floors', icon: 'ğŸ§¹', time: '30 min' },
        { id: 'default-fri2', task: 'Cook meals', icon: 'ğŸ²', time: '1 hr' },
        { id: 'default-fri3', task: 'Iron clothes', icon: 'ğŸ‘”', time: '30 min' }
      ],
      Saturday: [
        { id: 'default-sat1', task: 'Gardening', icon: 'ğŸŒ±', time: '1 hr' },
        { id: 'default-sat2', task: 'Go to the market / grocery shopping', icon: 'ğŸ›’', time: '1.5 hrs' },
        { id: 'default-sat3', task: 'Cook meals', icon: 'ğŸ²', time: '1 hr' },
        { id: 'default-sat4', task: 'Laundry and ironing', icon: 'ğŸ‘•', time: '1.5 hrs' },
        { id: 'default-sat5', task: 'Wash bathrooms', icon: 'ğŸš¿', time: '30 min' }
      ],
      Sunday: [
        { id: 'default-sun1', task: 'Plan weekly meals', icon: 'ğŸ“', time: '20 min' },
        { id: 'default-sun2', task: 'Prep lunches', icon: 'ğŸ±', time: '30 min' },
        { id: 'default-sun3', task: 'Relax & recharge', icon: 'â˜•', time: 'âˆ' }
      ]
    };


    // State
    let currentTab = 'chores';
    let currentChoreDay = 'Monday';
    let currentMealDay = 'Monday';
    let currentMealView = 'daily';
    let userData = [];
    let customChores = [];
    let customItems = [];
    let customRecipes = {};
    let currentRecipeEdit = null;
    let choreCompletions = {};
    let cartItems = {};


    // Helper functions to get country-specific data
    function getMealsData() {
      if (!selectedCountry) return {};
      return countryData[selectedCountry].meals || {};
    }

    function getMonthlyMealPlan() {
      if (!selectedCountry) return {};
      return countryData[selectedCountry].monthlyMealPlan || {};
    }

    function getShoppingData() {
      if (!selectedCountry) return { staples: [], proteins: [], vegetables: [], breakfast: [], basics: [] };
      return countryData[selectedCountry].shopping || { staples: [], proteins: [], vegetables: [], breakfast: [], basics: [] };
    }

    function getCurrency() {
      if (!selectedCountry) return 'KES';
      return countryData[selectedCountry].currency || 'KES';
    }

    function getBudget() {
      if (!selectedCountry) return 5000;
      return countryData[selectedCountry].budget || 5000;
    }

    function formatPrice(price) {
      const currency = getCurrency();
      return `${currency} ${price.toLocaleString()}`;
    }

    function getCustomRecipe(day, mealType) {
      if (!selectedCountry) return null;
      const key = `${selectedCountry}-${day}-${mealType}`;
      return customRecipes[key] || null;
    }

    // Load data from localStorage
    function loadData() {
      try {
        const saved = localStorage.getItem('homeManagerData');
        if (saved) {
          const data = JSON.parse(saved);
          customChores = data.customChores || [];
          customItems = data.customItems || [];
          customRecipes = data.customRecipes || {};
          choreCompletions = data.choreCompletions || {};
          cartItems = data.cartItems || {};
          selectedCountry = data.selectedCountry || null;
        }
      } catch (e) {
        console.error('Failed to load data', e);
      }
    }

    // Save data to localStorage
    function saveData() {
      try {
        localStorage.setItem('homeManagerData', JSON.stringify({
          customChores,
          customItems,
          customRecipes,
          choreCompletions,
          cartItems,
          selectedCountry
        }));
      } catch (e) {
        console.error('Failed to save data', e);
      }
    }

    // Toast notification
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'fixed top-4 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm z-50 animate-in';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    // Country selection
    function selectCountry(country) {
      selectedCountry = country;
      saveData();
      document.getElementById('country-selection').classList.add('hidden');
      document.getElementById('main-content').classList.remove('hidden');
      document.getElementById('country-flag').textContent = countryData[country].flag;
      // Render all views to ensure data is fresh when switching tabs
      renderAllViews();
    }

    // Render all views (used when country changes)
    function renderAllViews() {
      renderChores();
      renderMeals();
      renderShopping();
      if (currentMealView === 'monthly') {
        renderMonthlyCalendar();
      }
    }

    function showCountrySelection() {
      document.getElementById('country-selection').classList.remove('hidden');
      document.getElementById('main-content').classList.add('hidden');
    }

    // Switch tabs
    function switchTab(tab) {
      currentTab = tab;
      ['chores', 'meals', 'shopping'].forEach(t => {
        const contentEl = document.getElementById(`content-${t}`);
        if (contentEl) {
          contentEl.classList.toggle('hidden', t !== tab);
        }
        const tabBtn = document.getElementById(`tab-${t}`);
        if (tabBtn) {
          if (t === tab) {
            tabBtn.classList.add('tab-active');
            tabBtn.classList.remove('bg-white', 'text-gray-600', 'card-shadow');
          } else {
            tabBtn.classList.remove('tab-active');
            tabBtn.classList.add('bg-white', 'text-gray-600', 'card-shadow');
          }
        }
      });
      renderCurrentView();
    }

    // Select chore day
    function selectChoreDay(day) {
      currentChoreDay = day;
      document.querySelectorAll('.day-chip').forEach((chip, i) => {
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        if (i < 7) {
          if (days[i] === day) {
            chip.classList.add('day-chip-active');
            chip.classList.remove('bg-white', 'text-gray-600');
          } else {
            chip.classList.remove('day-chip-active');
            chip.classList.add('bg-white', 'text-gray-600');
          }
        }
      });
      renderChores();
    }

    // Select meal day
    function selectMealDay(day) {
      currentMealDay = day;
      document.querySelectorAll('.meal-day-chip').forEach((chip, i) => {
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        if (days[i] === day) {
          chip.classList.add('day-chip-active');
          chip.classList.remove('bg-white', 'text-gray-600');
        } else {
          chip.classList.remove('day-chip-active');
          chip.classList.add('bg-white', 'text-gray-600');
        }
      });
      renderMeals();
    }

    // Set meal view
    function setMealView(view) {
      currentMealView = view;
      const dailyBtn = document.getElementById('view-daily');
      const monthlyBtn = document.getElementById('view-monthly');
      const dailyViewDiv = document.getElementById('daily-view');
      const monthlyViewDiv = document.getElementById('monthly-view');

      if (view === 'daily') {
        dailyBtn.classList.add('bg-gradient-to-r', 'from-purple-500', 'to-indigo-500', 'text-white');
        dailyBtn.classList.remove('bg-white', 'text-gray-600', 'card-shadow');
        monthlyBtn.classList.remove('bg-gradient-to-r', 'from-purple-500', 'to-indigo-500', 'text-white');
        monthlyBtn.classList.add('bg-white', 'text-gray-600', 'card-shadow');
        dailyViewDiv.classList.remove('hidden');
        monthlyViewDiv.classList.add('hidden');
      } else {
        monthlyBtn.classList.add('bg-gradient-to-r', 'from-purple-500', 'to-indigo-500', 'text-white');
        monthlyBtn.classList.remove('bg-white', 'text-gray-600', 'card-shadow');
        dailyBtn.classList.remove('bg-gradient-to-r', 'from-purple-500', 'to-indigo-500', 'text-white');
        dailyBtn.classList.add('bg-white', 'text-gray-600', 'card-shadow');
        dailyViewDiv.classList.add('hidden');
        monthlyViewDiv.classList.remove('hidden');
        renderMonthlyCalendar();
      }
    }

    // Render current view
    function renderCurrentView() {
      if (currentTab === 'chores') renderChores();
      else if (currentTab === 'meals') renderMeals();
      else if (currentTab === 'shopping') renderShopping();
    }

    // Check if chore is completed
    function isChoreCompleted(choreId, day) {
      return choreCompletions[`${choreId}-${day}`] || false;
    }

    // Toggle chore completion
    function toggleChore(choreId, day) {
      const key = `${choreId}-${day}`;
      choreCompletions[key] = !choreCompletions[key];
      saveData();
      renderChores();
    }

    // Check if item is in cart
    function isIngredientInCart(itemId) {
      return cartItems[itemId] || false;
    }

    // Toggle cart item
    function toggleIngredient(itemId) {
      cartItems[itemId] = !cartItems[itemId];
      saveData();
      renderShopping();
    }

    // Get chores for day
    function getChoresForDay(day) {
      const defaultChores = defaultChoresData[day] || [];
      const custom = customChores.filter(c => c.day === day);
      return [...defaultChores, ...custom];
    }

    // Get items by category (country-specific)
    function getItemsByCategory(category) {
      const shoppingData = getShoppingData();
      const defaultItems = shoppingData[category] || [];
      const custom = customItems.filter(i => i.category === category);
      return [...defaultItems, ...custom];
    }

    // Render chores
    function renderChores() {
      const container = document.getElementById('chores-list');
      const allChores = getChoresForDay(currentChoreDay);

      let html = `
        <div class="bg-gradient-to-r from-blue-100 to-purple-100 rounded-2xl p-4 mb-3">
          <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
            <span>ğŸ“…</span> Daily (Every Day)
          </h3>
          <div class="space-y-2">
            ${dailyChores.map(chore => {
              const done = isChoreCompleted(chore.id, currentChoreDay);
              return `
                <div class="bg-white rounded-xl p-3 flex items-center gap-3 ${done ? 'chore-done' : ''} cursor-pointer" onclick="toggleChore('${chore.id}', '${currentChoreDay}')">
                  <div class="w-8 h-8 rounded-full ${done ? 'bg-green-100' : 'bg-blue-100'} flex items-center justify-center text-lg">
                    ${done ? 'âœ“' : chore.icon}
                  </div>
                  <div class="flex-1">
                    <p class="font-medium text-gray-800 text-sm">${chore.task}</p>
                    ${chore.time ? `<p class="text-xs text-gray-500">${chore.time}</p>` : ''}
                  </div>
                  <div class="w-5 h-5 rounded-full border-2 ${done ? 'bg-green-500 border-green-500' : 'border-gray-300'} flex items-center justify-center">
                    ${done ? '<span class="text-white text-xs">âœ“</span>' : ''}
                  </div>
                </div>
              `;
            }).join('')}
          </div>
        </div>
      `;

      if (allChores.length > 0) {
        html += `
          <div class="bg-white rounded-2xl p-4 card-shadow mb-2">
            <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
              <span>âœ¨</span> ${currentChoreDay} Tasks
            </h3>
            <div class="space-y-2">
              ${allChores.map(chore => {
                const done = isChoreCompleted(chore.id, currentChoreDay);
                const isCustom = !chore.id.startsWith('default-');
                return `
                  <div class="bg-white rounded-xl p-3 border ${isCustom ? 'border-2 border-purple-200 bg-gradient-to-r from-purple-50 to-pink-50' : 'border-gray-100'} flex items-center gap-3 ${done ? 'chore-done' : ''} cursor-pointer" onclick="toggleChore('${chore.id}', '${currentChoreDay}')">
                    <div class="w-10 h-10 rounded-full ${done ? 'bg-green-100' : 'bg-purple-100'} flex items-center justify-center text-xl">
                      ${done ? 'âœ“' : chore.icon}
                    </div>
                    <div class="flex-1">
                      <p class="font-semibold text-gray-800">${chore.task}</p>
                      ${chore.time ? `<p class="text-xs text-gray-500">${chore.time}</p>` : ''}
                      ${isCustom ? '<p class="text-xs text-purple-600 font-semibold">Custom</p>' : ''}
                    </div>
                    <div class="w-6 h-6 rounded-full border-2 ${done ? 'bg-green-500 border-green-500' : 'border-gray-300'} flex items-center justify-center">
                      ${done ? '<span class="text-white text-xs">âœ“</span>' : ''}
                    </div>
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        `;
      }

      container.innerHTML = html;
    }

    // Render meals
    function renderMeals() {
      const container = document.getElementById('meals-list');
      const mealsData = getMealsData();
      const dayMeals = mealsData[currentMealDay];

      if (!dayMeals) {
        container.innerHTML = '<div class="text-center py-8 text-gray-500">Please select a country to view meals</div>';
        return;
      }

      const mealTypes = [
        { key: 'breakfast', label: 'Breakfast', color: 'from-amber-400 to-orange-400', snackLabel: 'Mid-Morning' },
        { key: 'lunch', label: 'Lunch', color: 'from-green-400 to-emerald-400', snackLabel: 'Afternoon' },
        { key: 'dinner', label: 'Dinner', color: 'from-purple-400 to-pink-400', snackLabel: null }
      ];

      container.innerHTML = mealTypes.map(({ key, label, color, snackLabel }) => {
        const meal = dayMeals[key];
        const hasRecipe = meal.recipe;
        const snack = meal.snack;

        let html = `
          <div class="bg-white rounded-xl overflow-hidden card-shadow cursor-pointer" onclick="openRecipeModal('${currentMealDay}', '${key}')">
            <div class="bg-gradient-to-r ${color} px-4 py-2">
              <span class="text-white text-xs font-semibold">${label}</span>
            </div>
            <div class="p-4 flex items-center gap-3">
              <span class="text-3xl">${meal.icon}</span>
              <div class="flex-1">
                <p class="font-bold text-gray-800">${meal.name}</p>
                <div class="flex gap-3 text-xs text-gray-500 mt-1">
                  <span>â± ${meal.time}</span>
                  ${!hasRecipe ? '<span class="text-purple-600 font-semibold">+ Add Recipe</span>' : '<span class="text-green-600">âœ“ Recipe ready</span>'}
                </div>
              </div>
              <span class="text-gray-400">â€º</span>
            </div>
          </div>
        `;

        if (snack && snackLabel) {
          html += `
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-3 flex items-center gap-2">
              <span class="text-sm">â˜•</span>
              <div class="flex-1">
                <p class="text-xs font-semibold text-gray-600">${snackLabel} Snack</p>
                <p class="text-sm text-gray-800">${snack}</p>
              </div>
            </div>
          `;
        }

        return html;
      }).join('');
    }

    // Render monthly calendar
    function renderMonthlyCalendar() {
      const container = document.getElementById('monthly-calendar');
      const monthlyMealPlan = getMonthlyMealPlan();

      if (!monthlyMealPlan || Object.keys(monthlyMealPlan).length === 0) {
        container.innerHTML = '<div class="text-center py-8 text-gray-500">Please select a country to view monthly meal plan</div>';
        return;
      }

      const weeks = ['week1', 'week2', 'week3', 'week4'];
      const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

      let html = weeks.map((weekKey, weekIndex) => {
        const weekData = monthlyMealPlan[weekKey];

        return `
          <div class="bg-white rounded-2xl p-4 card-shadow mb-4">
            <h3 class="font-bold text-lg text-gray-800 mb-3 flex items-center gap-2">
              <span>ğŸ“†</span> Week ${weekIndex + 1}
            </h3>
            <div class="grid grid-cols-1 gap-3">
              ${days.map(day => {
                const dayData = weekData[day];
                const hasContent = dayData.breakfast || dayData.lunch || dayData.supper || dayData.snacks;

                return `
                  <div class="border border-gray-200 rounded-xl p-3 ${!hasContent ? 'bg-gray-50' : 'bg-gradient-to-r from-purple-50 to-blue-50'}">
                    <div class="font-bold text-sm text-gray-800 mb-2 pb-2 border-b border-gray-200">${day}</div>
                    ${!hasContent ? '<p class="text-xs text-gray-400 italic">Rest day</p>' : `
                      <div class="space-y-2">
                        ${dayData.breakfast ? `
                          <div class="flex items-start gap-2">
                            <span class="text-lg flex-shrink-0">${dayData.breakfastIcon}</span>
                            <div class="flex-1 min-w-0">
                              <p class="text-xs font-semibold text-amber-600">Breakfast</p>
                              <p class="text-xs text-gray-700">${dayData.breakfast}</p>
                            </div>
                          </div>
                        ` : ''}
                        ${dayData.lunch ? `
                          <div class="flex items-start gap-2">
                            <span class="text-lg flex-shrink-0">${dayData.lunchIcon}</span>
                            <div class="flex-1 min-w-0">
                              <p class="text-xs font-semibold text-green-600">Lunch</p>
                              <p class="text-xs text-gray-700">${dayData.lunch}</p>
                            </div>
                          </div>
                        ` : ''}
                        ${dayData.supper && dayData.supper !== 'Same as lunch' ? `
                          <div class="flex items-start gap-2">
                            <span class="text-lg flex-shrink-0">${dayData.supperIcon}</span>
                            <div class="flex-1 min-w-0">
                              <p class="text-xs font-semibold text-purple-600">Supper</p>
                              <p class="text-xs text-gray-700">${dayData.supper}</p>
                            </div>
                          </div>
                        ` : dayData.supper === 'Same as lunch' ? `
                          <div class="flex items-start gap-2">
                            <span class="text-lg flex-shrink-0">${dayData.supperIcon}</span>
                            <div class="flex-1 min-w-0">
                              <p class="text-xs font-semibold text-purple-600">Supper</p>
                              <p class="text-xs text-gray-500 italic">Same as lunch</p>
                            </div>
                          </div>
                        ` : ''}
                        ${dayData.snacks ? `
                          <div class="flex items-start gap-2 bg-blue-50 rounded-lg p-2 mt-2">
                            <span class="text-sm flex-shrink-0">ğŸ</span>
                            <div class="flex-1 min-w-0">
                              <p class="text-xs font-semibold text-blue-600">Snacks</p>
                              <p class="text-xs text-gray-700">${dayData.snacks}</p>
                            </div>
                          </div>
                        ` : ''}
                      </div>
                    `}
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        `;
      }).join('');

      container.innerHTML = html;
    }

    // Render shopping
    function renderShopping() {
      let grandTotal = 0;
      let inCartCount = 0;
      let totalItems = 0;
      const currency = getCurrency();
      const budget = getBudget();

      const categories = [
        { key: 'staples', elementId: 'staples-list', priceId: 'staples-price' },
        { key: 'proteins', elementId: 'proteins-list', priceId: 'proteins-price' },
        { key: 'vegetables', elementId: 'vegetables-list', priceId: 'vegetables-price' },
        { key: 'breakfast', elementId: 'breakfast-list', priceId: 'breakfast-price' },
        { key: 'basics', elementId: 'basics-list', priceId: 'basics-price' }
      ];

      categories.forEach(({ key, elementId, priceId }) => {
        const container = document.getElementById(elementId);
        const allItems = getItemsByCategory(key);
        totalItems += allItems.length;
        let categoryTotal = 0;

        container.innerHTML = allItems.map(item => {
          const bought = isIngredientInCart(item.id);
          if (bought) inCartCount++;
          categoryTotal += item.price;
          grandTotal += item.price;
          const isCustom = item.id.startsWith('custom-');

          return `
            <div class="flex items-center gap-3 py-2 border-b border-gray-100 last:border-0 ${bought ? 'ingredient-bought' : ''} cursor-pointer" onclick="toggleIngredient('${item.id}')">
              <div class="w-5 h-5 rounded-full border-2 ${bought ? 'bg-green-500 border-green-500' : 'border-gray-300'} flex items-center justify-center flex-shrink-0">
                ${bought ? '<span class="text-white text-xs">âœ“</span>' : ''}
              </div>
              <div class="flex-1 min-w-0">
                <p class="font-medium text-gray-800 text-sm">${item.name}</p>
                <p class="text-xs text-gray-500">${item.amount}${isCustom ? ' â€¢ Custom' : ''}</p>
              </div>
              <span class="font-semibold text-purple-600 flex-shrink-0 text-sm">${currency} ${item.price.toLocaleString()}</span>
            </div>
          `;
        }).join('');

        document.getElementById(priceId).textContent = `${currency} ${categoryTotal.toLocaleString()}`;
      });

      document.getElementById('total-price').textContent = `${currency} ${grandTotal.toLocaleString()}`;
      document.getElementById('cart-count').textContent = `${inCartCount} / ${totalItems}`;
      document.getElementById('cart-progress').style.width = `${totalItems > 0 ? (inCartCount / totalItems) * 100 : 0}%`;

      // Update budget display
      const budgetText = document.getElementById('budget-text');
      if (budgetText) {
        budgetText.textContent = `Budget: ~${currency} ${budget.toLocaleString()}`;
      }
    }

    // Open recipe modal
    function openRecipeModal(day, mealType) {
      const mealsData = getMealsData();
      const meal = mealsData[day][mealType];
      const modal = document.getElementById('recipe-modal');
      const title = document.getElementById('modal-title');
      const content = document.getElementById('modal-content');
      const currency = getCurrency();

      title.textContent = meal.name;

      // Check for custom recipe first
      const customRecipe = getCustomRecipe(day, mealType);
      const recipe = customRecipe || meal.recipe;

      if (!recipe) {
        content.innerHTML = `
          <div class="text-center py-8">
            <span class="text-6xl mb-4 block">${meal.icon}</span>
            <h3 class="text-xl font-bold text-gray-800 mb-2">${meal.name}</h3>
            <p class="text-gray-600 mb-4">No recipe available yet</p>
            <button onclick="openAddRecipeModal('${day}', '${mealType}')" class="bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white px-6 py-3 rounded-xl font-semibold transition-all transform hover:scale-105 flex items-center justify-center gap-2 mx-auto">
              <span>+</span> Add Recipe
            </button>
          </div>
        `;
      } else {
        const totalPrice = recipe.ingredients.reduce((sum, ing) => sum + ing.price, 0);
        const isCustom = !!customRecipe;

        content.innerHTML = `
          <div class="flex items-center gap-4 mb-4">
            <span class="text-5xl">${meal.icon}</span>
            <div>
              <p class="text-sm text-gray-500">Servings: ${recipe.servings}</p>
              <p class="text-sm text-gray-500">Time: ${meal.time}</p>
              ${isCustom ? '<p class="text-xs text-purple-600 font-semibold">Custom Recipe</p>' : ''}
            </div>
          </div>

          <div class="mb-4">
            <div class="flex justify-between items-center mb-2">
              <h4 class="font-bold text-gray-800">Ingredients</h4>
              <span class="text-sm font-semibold text-purple-600">~${currency} ${totalPrice.toLocaleString()}</span>
            </div>
            <div class="bg-purple-50 rounded-xl p-3 space-y-2">
              ${recipe.ingredients.map(ing => `
                <div class="flex justify-between text-sm">
                  <span class="text-gray-700">${ing.name}</span>
                  <span class="text-gray-500">${ing.amount} Â· ${currency} ${ing.price.toLocaleString()}</span>
                </div>
              `).join('')}
            </div>
          </div>

          <div>
            <h4 class="font-bold text-gray-800 mb-2">Instructions</h4>
            <ol class="space-y-2">
              ${recipe.steps.map((step, i) => `
                <li class="flex gap-3 text-sm">
                  <span class="w-6 h-6 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white flex items-center justify-center flex-shrink-0 text-xs font-bold">${i + 1}</span>
                  <span class="text-gray-700 pt-0.5">${step}</span>
                </li>
              `).join('')}
            </ol>
          </div>

          ${isCustom ? `
          <div class="mt-4 pt-4 border-t border-gray-200 flex gap-2">
            <button onclick="openAddRecipeModal('${day}', '${mealType}')" class="flex-1 py-2 px-4 rounded-xl font-semibold bg-purple-100 text-purple-600 hover:bg-purple-200 transition-colors text-sm">
              Edit Recipe
            </button>
            <button onclick="deleteCustomRecipe('${day}', '${mealType}')" class="py-2 px-4 rounded-xl font-semibold bg-red-100 text-red-600 hover:bg-red-200 transition-colors text-sm">
              Delete
            </button>
          </div>
          ` : ''}
        `;
      }

      modal.classList.remove('hidden');
    }

    function closeRecipeModal() {
      document.getElementById('recipe-modal').classList.add('hidden');
    }

    // Add Recipe Modal functions
    function openAddRecipeModal(day, mealType) {
      currentRecipeEdit = { day, mealType };
      const modal = document.getElementById('add-recipe-modal');
      const form = document.getElementById('add-recipe-form');

      // Reset form
      form.reset();
      document.getElementById('recipe-servings').value = '4';

      // Reset ingredients list to single row
      const ingredientsList = document.getElementById('ingredients-list');
      ingredientsList.innerHTML = `
        <div class="ingredient-row flex gap-2">
          <input type="text" class="ing-name flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Name" required>
          <input type="text" class="ing-amount w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Amt" required>
          <input type="number" class="ing-price w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Price" required>
        </div>
      `;

      // Reset steps list to single row
      const stepsList = document.getElementById('steps-list');
      stepsList.innerHTML = `
        <div class="step-row flex gap-2 items-center">
          <span class="step-num w-6 h-6 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white flex items-center justify-center flex-shrink-0 text-xs font-bold">1</span>
          <input type="text" class="step-text flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Step description" required>
        </div>
      `;

      // If editing existing recipe, populate fields
      const existingRecipe = getCustomRecipe(day, mealType);
      if (existingRecipe) {
        document.getElementById('recipe-servings').value = existingRecipe.servings;

        // Populate ingredients
        ingredientsList.innerHTML = existingRecipe.ingredients.map((ing, i) => `
          <div class="ingredient-row flex gap-2">
            <input type="text" class="ing-name flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Name" value="${ing.name}" required>
            <input type="text" class="ing-amount w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Amt" value="${ing.amount}" required>
            <input type="number" class="ing-price w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Price" value="${ing.price}" required>
            ${i > 0 ? '<button type="button" onclick="removeIngredientField(this)" class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-sm hover:bg-red-200 transition-colors">âœ•</button>' : ''}
          </div>
        `).join('');

        // Populate steps
        stepsList.innerHTML = existingRecipe.steps.map((step, i) => `
          <div class="step-row flex gap-2 items-center">
            <span class="step-num w-6 h-6 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white flex items-center justify-center flex-shrink-0 text-xs font-bold">${i + 1}</span>
            <input type="text" class="step-text flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Step description" value="${step}" required>
            ${i > 0 ? '<button type="button" onclick="removeStepField(this)" class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-sm hover:bg-red-200 transition-colors">âœ•</button>' : ''}
          </div>
        `).join('');
      }

      closeRecipeModal();
      modal.classList.remove('hidden');
    }

    function closeAddRecipeModal() {
      document.getElementById('add-recipe-modal').classList.add('hidden');
      currentRecipeEdit = null;
    }

    function addIngredientField() {
      const ingredientsList = document.getElementById('ingredients-list');
      const newRow = document.createElement('div');
      newRow.className = 'ingredient-row flex gap-2';
      newRow.innerHTML = `
        <input type="text" class="ing-name flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Name" required>
        <input type="text" class="ing-amount w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Amt" required>
        <input type="number" class="ing-price w-20 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Price" required>
        <button type="button" onclick="removeIngredientField(this)" class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-sm hover:bg-red-200 transition-colors">âœ•</button>
      `;
      ingredientsList.appendChild(newRow);
    }

    function removeIngredientField(btn) {
      btn.closest('.ingredient-row').remove();
    }

    function addStepField() {
      const stepsList = document.getElementById('steps-list');
      const stepCount = stepsList.querySelectorAll('.step-row').length + 1;
      const newRow = document.createElement('div');
      newRow.className = 'step-row flex gap-2 items-center';
      newRow.innerHTML = `
        <span class="step-num w-6 h-6 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white flex items-center justify-center flex-shrink-0 text-xs font-bold">${stepCount}</span>
        <input type="text" class="step-text flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-sm" placeholder="Step description" required>
        <button type="button" onclick="removeStepField(this)" class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-sm hover:bg-red-200 transition-colors">âœ•</button>
      `;
      stepsList.appendChild(newRow);
    }

    function removeStepField(btn) {
      btn.closest('.step-row').remove();
      // Renumber remaining steps
      const stepsList = document.getElementById('steps-list');
      stepsList.querySelectorAll('.step-num').forEach((num, i) => {
        num.textContent = i + 1;
      });
    }

    function handleAddRecipe(event) {
      event.preventDefault();

      if (!currentRecipeEdit) return;

      const servings = parseInt(document.getElementById('recipe-servings').value);

      // Collect ingredients
      const ingredientRows = document.querySelectorAll('#ingredients-list .ingredient-row');
      const ingredients = Array.from(ingredientRows).map(row => ({
        name: row.querySelector('.ing-name').value.trim(),
        amount: row.querySelector('.ing-amount').value.trim(),
        price: parseInt(row.querySelector('.ing-price').value) || 0
      })).filter(ing => ing.name);

      // Collect steps
      const stepRows = document.querySelectorAll('#steps-list .step-row');
      const steps = Array.from(stepRows)
        .map(row => row.querySelector('.step-text').value.trim())
        .filter(step => step);

      if (ingredients.length === 0) {
        showToast('Please add at least one ingredient');
        return;
      }

      if (steps.length === 0) {
        showToast('Please add at least one step');
        return;
      }

      // Save recipe
      const key = `${selectedCountry}-${currentRecipeEdit.day}-${currentRecipeEdit.mealType}`;
      customRecipes[key] = { servings, ingredients, steps };
      saveData();

      closeAddRecipeModal();
      showToast('Recipe saved!');

      // Reopen the recipe modal to show the saved recipe
      openRecipeModal(currentRecipeEdit.day, currentRecipeEdit.mealType);
    }

    function deleteCustomRecipe(day, mealType) {
      const key = `${selectedCountry}-${day}-${mealType}`;
      delete customRecipes[key];
      saveData();
      closeRecipeModal();
      showToast('Recipe deleted');
    }

    // Tips drawer
    function openTipsDrawer() {
      if (!selectedCountry) {
        showToast('Please select a country first');
        return;
      }

      const drawer = document.getElementById('tips-drawer');
      const container = document.getElementById('tips-drawer-content');
      const paymentMethods = countryData[selectedCountry].paymentMethods;

      container.innerHTML = paymentMethods.map(method => `
        <div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-5 card-shadow border border-gray-100">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-r ${method.color} flex items-center justify-center text-4xl shadow-lg">
              ${method.icon}
            </div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800 text-lg">${method.name}</h4>
              <p class="text-xs text-gray-500">Mobile Money Transfer</p>
            </div>
          </div>
          <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200">
            <p class="text-xs text-gray-600 mb-2 font-semibold">Dial this code:</p>
            <div class="flex items-center justify-between gap-3">
              <p class="font-mono font-bold text-xl text-gray-800">${method.number}</p>
              <button onclick="copyToClipboard('${method.number}')" class="bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all transform hover:scale-105 shadow-md">
                Copy
              </button>
            </div>
          </div>
          <p class="text-xs text-gray-500 mt-3 text-center">Thank you for your support! ğŸ’œ</p>
        </div>
      `).join('');

      drawer.classList.remove('hidden');
    }

    function closeTipsDrawer() {
      document.getElementById('tips-drawer').classList.add('hidden');
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showToast('Code copied to clipboard!');
      }).catch(() => {
        showToast('Failed to copy code');
      });
    }

    // Settings functions
    function openPersonalSettings() {
      openSettingsDrawer();
    }

    function openSettingsDrawer() {
      document.getElementById('settings-drawer').classList.remove('hidden');
      renderCustomChores();
      renderCustomItems();
    }

    function closeSettingsDrawer() {
      document.getElementById('settings-drawer').classList.add('hidden');
    }

    function switchSettingsTab(tab) {
      currentSettingsTab = tab;

      ['chores-edit', 'meals-edit', 'shopping-edit'].forEach(t => {
        const btn = document.getElementById(`settings-tab-${t.split('-')[0]}`);
        if (t === tab) {
          btn.classList.add('bg-white', 'text-purple-600', 'shadow-sm');
          btn.classList.remove('text-gray-600');
        } else {
          btn.classList.remove('bg-white', 'text-purple-600', 'shadow-sm');
          btn.classList.add('text-gray-600');
        }
      });

      document.getElementById('chores-editor').classList.toggle('hidden', tab !== 'chores-edit');
      document.getElementById('meals-editor').classList.toggle('hidden', tab !== 'meals-edit');
      document.getElementById('shopping-editor').classList.toggle('hidden', tab !== 'shopping-edit');
    }

    function renderCustomChores() {
      const container = document.getElementById('custom-chores-list');

      if (customChores.length === 0) {
        container.innerHTML = '<p class="text-sm text-gray-500 text-center py-4">No custom chores yet. Add your first one!</p>';
        return;
      }

      container.innerHTML = customChores.map(chore => `
        <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-3 flex items-center gap-3">
          <span class="text-2xl">${chore.icon}</span>
          <div class="flex-1">
            <p class="font-semibold text-gray-800 text-sm">${chore.task}</p>
            <p class="text-xs text-gray-500">${chore.day} â€¢ ${chore.time}</p>
          </div>
          <button onclick="deleteChore('${chore.id}')" class="w-8 h-8 rounded-full bg-red-100 hover:bg-red-200 text-red-600 flex items-center justify-center transition-colors text-sm">
            âœ•
          </button>
        </div>
      `).join('');
    }

    function renderCustomItems() {
      const container = document.getElementById('custom-items-list');
      const currency = getCurrency();

      if (customItems.length === 0) {
        container.innerHTML = '<p class="text-sm text-gray-500 text-center py-4">No custom items yet. Add your first one!</p>';
        return;
      }

      container.innerHTML = customItems.map(item => `
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-3 flex items-center gap-3">
          <div class="flex-1">
            <p class="font-semibold text-gray-800 text-sm">${item.name}</p>
            <p class="text-xs text-gray-500">${item.amount} â€¢ ${item.category}</p>
          </div>
          <span class="font-bold text-purple-600 text-sm">${currency} ${item.price.toLocaleString()}</span>
          <button onclick="deleteItem('${item.id}')" class="w-8 h-8 rounded-full bg-red-100 hover:bg-red-200 text-red-600 flex items-center justify-center transition-colors text-sm">
            âœ•
          </button>
        </div>
      `).join('');
    }

    function showAddChoreForm() {
      document.getElementById('add-chore-modal').classList.remove('hidden');
    }

    function closeAddChoreModal() {
      document.getElementById('add-chore-modal').classList.add('hidden');
    }

    function handleAddChore(event) {
      event.preventDefault();

      const task = document.getElementById('chore-task').value;
      const icon = document.getElementById('chore-icon').value;
      const time = document.getElementById('chore-time').value;
      const day = document.getElementById('chore-day').value;

      customChores.push({
        id: 'custom-' + Date.now(),
        task,
        icon,
        time,
        day
      });

      saveData();
      closeAddChoreModal();
      showToast('Chore added successfully!');
      renderCustomChores();
      document.getElementById('add-chore-form').reset();
    }

    function deleteChore(id) {
      customChores = customChores.filter(c => c.id !== id);
      saveData();
      showToast('Chore deleted');
      renderCustomChores();
    }

    function showAddItemForm() {
      document.getElementById('add-item-modal').classList.remove('hidden');
      // Update price label with current currency
      const currency = getCurrency();
      document.getElementById('item-price-label').textContent = `Price (${currency})`;
    }

    function closeAddItemModal() {
      document.getElementById('add-item-modal').classList.add('hidden');
    }

    function handleAddItem(event) {
      event.preventDefault();

      const name = document.getElementById('item-name').value;
      const amount = document.getElementById('item-amount').value;
      const price = parseInt(document.getElementById('item-price').value);
      const category = document.getElementById('item-category').value;

      customItems.push({
        id: 'custom-item-' + Date.now(),
        name,
        amount,
        price,
        category
      });

      saveData();
      closeAddItemModal();
      showToast('Item added successfully!');
      renderCustomItems();
      document.getElementById('add-item-form').reset();
    }

    function deleteItem(id) {
      customItems = customItems.filter(i => i.id !== id);
      saveData();
      showToast('Item deleted');
      renderCustomItems();
    }

    // Close modals on backdrop click
    document.getElementById('recipe-modal').addEventListener('click', (e) => {
      if (e.target.id === 'recipe-modal') closeRecipeModal();
    });

    document.getElementById('tips-drawer').addEventListener('click', (e) => {
      if (e.target.id === 'tips-drawer') closeTipsDrawer();
    });

    document.getElementById('settings-drawer').addEventListener('click', (e) => {
      if (e.target.id === 'settings-drawer') closeSettingsDrawer();
    });

    // Initialize app
    function initApp() {
      loadData();

      if (selectedCountry) {
        document.getElementById('country-selection').classList.add('hidden');
        document.getElementById('main-content').classList.remove('hidden');
        document.getElementById('country-flag').textContent = countryData[selectedCountry].flag;
        renderAllViews();
      } else {
        renderCurrentView();
      }
    }

    initApp();
  </script>
 </body>
</html>
